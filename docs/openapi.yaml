openapi: 3.1.0
info:
  title: XBuilder API
  version: 0.1.0
  description: |
    ## Overview

    **The API endpoints documented here are not yet stable and may change or break without notice. Use them at your own
    risk.**

security:
  - bearerAuth: []

paths:
  /users/list:
    get:
      tags:
        - Users
      summary: List users
      description: Retrieve a paginated list of users with optional filtering and ordering.
      security: []
      parameters:
        - name: follower
          description: Filter users who are being followed by the specified user.
          in: query
          schema:
            $ref: "#/components/schemas/User/properties/username"
        - name: followee
          description: Filter users who are following the specified user.
          in: query
          schema:
            $ref: "#/components/schemas/User/properties/username"
        - name: orderBy
          description: Field by which to order the results.
          in: query
          schema:
            type: string
            enum:
              - createdAt
              - updatedAt
              - followedAt
            default: createdAt
            examples:
              - createdAt
        - $ref: "#/components/parameters/SortOrder"
        - $ref: "#/components/parameters/PageIndex"
        - $ref: "#/components/parameters/PageSize"
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    $ref: "#/components/schemas/ByPage/properties/total"
                  data:
                    description: Array of user objects.
                    type: array
                    items:
                      $ref: "#/components/schemas/User"

  /user/{username}:
    get:
      tags:
        - Users
      summary: Get a user
      description: Retrieve details of a specific user.
      security: []
      parameters:
        - name: username
          description: Username of the user to get.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/User/properties/username"
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"

  /user:
    get:
      tags:
        - Users
      summary: Get the authenticated user
      description: Retrieve the profile information of the authenticated user.
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
    put:
      tags:
        - Users
      summary: Update the authenticated user
      description: Update the profile information of the authenticated user.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - description
              properties:
                description:
                  $ref: "#/components/schemas/User/properties/description"
      responses:
        "200":
          description: Successfully updated the authenticated user.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"

  /user/{username}/following:
    post:
      tags:
        - Users
      summary: Follow a user
      description: Follow the specified user as the authenticated user.
      parameters:
        - name: username
          description: Username of the user to follow.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/User/properties/username"
      responses:
        "204":
          description: Successfully followed the user.
    get:
      tags:
        - Users
      summary: Check if a user is followed by the authenticated user
      description: Determine if the authenticated user is following the specified user.
      parameters:
        - name: username
          description: Username of the user to check.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/User/properties/username"
      responses:
        "204":
          description: The user is followed by the authenticated user.
        "404":
          description: The user is not followed by the authenticated user.
    delete:
      tags:
        - Users
      summary: Unfollow a user
      description: Unfollow the specified user as the authenticated user.
      parameters:
        - name: username
          description: Username of the user to unfollow.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/User/properties/username"
      responses:
        "204":
          description: Successfully unfollowed the user.

  /project:
    post:
      tags:
        - Projects
      summary: Create a project
      description: |
        Create a new project.

        If `remixSource` is provided, the new project will be a remix of an existing project.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - visibility
              properties:
                remixSource:
                  description: |
                    Full name of the project or project release to remix from.

                    **Using the project's full name means remixing the latest release sourced from that project.**
                  oneOf:
                    - $ref: "#/components/schemas/ProjectFullName"
                    - $ref: "#/components/schemas/ProjectReleaseFullName"
                name:
                  $ref: "#/components/schemas/Project/properties/name"
                files:
                  description: |
                    File paths and their corresponding universal URLs associated with the project.

                    **Required if `remixSource` is not provided.**
                  $ref: "#/components/schemas/Project/properties/files"
                visibility:
                  $ref: "#/components/schemas/Project/properties/visibility"
                description:
                  $ref: "#/components/schemas/Project/properties/description"
                instructions:
                  $ref: "#/components/schemas/Project/properties/instructions"
                thumbnail:
                  $ref: "#/components/schemas/Project/properties/thumbnail"
      responses:
        "201":
          description: Successfully created the project.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Project"

  /projects/list:
    get:
      tags:
        - Projects
      summary: List projects
      description: |
        Retrieve a paginated list of projects with optional filtering and ordering.

        #### Visibility rules

        | Authenticated (as alice) | Owner | Visibility | Access |
        |--------------------------|-------|------------|--------|
        | false | * | | All users' public projects (force `visibility=public`) |
        | false | * | public | All users' public projects |
        | false | * | private | `401 Unauthorized` |
        | false | alice | | Alice's public projects (force `visibility=public`) |
        | false | alice | public | Alice's public projects |
        | false | alice | private | `401 Unauthorized` |
        | true | * | | All alice's projects + others' public projects |
        | true | * | public | All users' public projects |
        | true | * | private | Alice's private projects |
        | true | alice | | All alice's projects |
        | true | alice | public | Alice's public projects |
        | true | alice | private | Alice's private projects |
        | true | bob | | Bob's public projects (force `visibility=public`) |
        | true | bob | public | Bob's public projects |
        | true | bob | private | `401 Unauthorized` |
      security:
        - {}
        - bearerAuth: []
      parameters:
        - name: owner
          description: |
            Filter projects by the owner's username.

            Defaults to the authenticated user if not specified. Use `*` to include projects from all users.
          in: query
          schema:
            $ref: "#/components/schemas/Project/properties/owner"
        - name: remixedFrom
          description: Filter remixed projects by the full name of the source project or project release.
          in: query
          schema:
            oneOf:
              - $ref: "#/components/schemas/ProjectFullName"
              - $ref: "#/components/schemas/ProjectReleaseFullName"
        - name: keyword
          description: Filter projects by name pattern.
          in: query
          schema:
            $ref: "#/components/schemas/Project/properties/name"
        - name: visibility
          description: Filter projects by visibility.
          in: query
          schema:
            $ref: "#/components/schemas/Project/properties/visibility"
        - name: liker
          description: Filter projects liked by the specified user.
          in: query
          schema:
            $ref: "#/components/schemas/User/properties/username"
        - name: createdAfter
          description: Filter projects created after this timestamp.
          in: query
          schema:
            type: string
            format: date-time
        - name: likesReceivedAfter
          description: Filter projects that gained new likes after this timestamp.
          in: query
          schema:
            type: string
            format: date-time
        - name: remixesReceivedAfter
          description: Filter projects that were remixed after this timestamp.
          in: query
          schema:
            type: string
            format: date-time
        - name: fromFollowees
          description: When true, include projects created by the authenticated user's followees.
          in: query
          schema:
            type: boolean
            default: false
        - name: orderBy
          description: Field by which to order the results.
          in: query
          schema:
            type: string
            enum:
              - createdAt
              - updatedAt
              - likeCount
              - remixCount
              - recentLikeCount
              - recentRemixCount
              - likedAt
            default: createdAt
            examples:
              - createdAt
        - $ref: "#/components/parameters/SortOrder"
        - $ref: "#/components/parameters/PageIndex"
        - $ref: "#/components/parameters/PageSize"
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    $ref: "#/components/schemas/ByPage/properties/total"
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/Project"

  /project/{owner}/{name}:
    get:
      tags:
        - Projects
      summary: Get a project
      description: Retrieve details of a specific project.
      security:
        - {}
        - bearerAuth: []
      parameters:
        - name: owner
          description: Username of the project's owner.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/owner"
        - name: name
          description: Name of the project to get.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/name"
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Project"
    put:
      tags:
        - Projects
      summary: Update a project
      description: Update the details of a specific project.
      parameters:
        - name: owner
          description: Username of the project's owner.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/owner"
        - name: name
          description: Name of the project to update.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/name"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - files
                - visibility
              properties:
                files:
                  $ref: "#/components/schemas/Project/properties/files"
                visibility:
                  $ref: "#/components/schemas/Project/properties/visibility"
                description:
                  $ref: "#/components/schemas/Project/properties/description"
                instructions:
                  $ref: "#/components/schemas/Project/properties/instructions"
                extraSettings:
                  $ref: "#/components/schemas/Project/properties/extraSettings"
                thumbnail:
                  $ref: "#/components/schemas/Project/properties/thumbnail"
      responses:
        "200":
          description: Successfully updated the project.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Project"
    delete:
      tags:
        - Projects
      summary: Delete a project
      description: Permanently delete a specific project by its owner and name.
      parameters:
        - name: owner
          description: Username of the project's owner.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/owner"
        - name: name
          description: Name of the project to delete.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/name"
      responses:
        "204":
          description: Successfully deleted the project.

  /project/{owner}/{name}/view:
    post:
      tags:
        - Projects
      summary: Record a project view
      description: Record a view for the specified project as the authenticated user.
      parameters:
        - name: owner
          description: Username of the project's owner.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/owner"
        - name: name
          description: Name of the project to record a view for.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/name"
      responses:
        "204":
          description: Successfully recorded the project view.

  /project/{owner}/{name}/liking:
    post:
      tags:
        - Projects
      summary: Like a project
      description: Like the specified project as the authenticated user.
      parameters:
        - name: owner
          description: Username of the project's owner.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/owner"
        - name: name
          description: Name of the project to like.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/name"
      responses:
        "204":
          description: Successfully liked the project.
    get:
      tags:
        - Projects
      summary: Check if a project is liked by the authenticated user
      description: Determine if the authenticated user has liked the specified project.
      parameters:
        - name: owner
          description: Username of the project's owner.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/owner"
        - name: name
          description: Name of the project to check.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/name"
      responses:
        "204":
          description: The project is liked by the authenticated user.
        "404":
          description: The project is not liked by the authenticated user.
    delete:
      tags:
        - Projects
      summary: Unlike a project
      description: Unlike the specified project as the authenticated user.
      parameters:
        - name: owner
          description: Username of the project's owner.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/owner"
        - name: name
          description: Name of the project to unlike.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/name"
      responses:
        "204":
          description: Successfully unliked the project.

  /project-release:
    post:
      tags:
        - Project Releases
      summary: Create a project release
      description: Create a new release for a specific project.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - projectFullName
                - name
                - description
              properties:
                projectFullName:
                  $ref: "#/components/schemas/ProjectRelease/properties/projectFullName"
                name:
                  $ref: "#/components/schemas/ProjectRelease/properties/name"
                description:
                  $ref: "#/components/schemas/ProjectRelease/properties/description"
                thumbnail:
                  $ref: "#/components/schemas/ProjectRelease/properties/thumbnail"
      responses:
        "201":
          description: Successfully created the project release.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProjectRelease"

  /project-releases/list:
    get:
      tags:
        - Project Releases
      summary: List project releases
      description: Retrieve a paginated list of project releases with optional filtering and ordering.
      security: []
      parameters:
        - name: projectFullName
          description: Filter releases by the full name of the associated project.
          in: query
          schema:
            $ref: "#/components/schemas/ProjectRelease/properties/projectFullName"
        - name: orderBy
          description: Field by which to order the results.
          in: query
          schema:
            type: string
            enum:
              - createdAt
              - updatedAt
              - remixCount
            default: createdAt
            examples:
              - createdAt
        - $ref: "#/components/parameters/SortOrder"
        - $ref: "#/components/parameters/PageIndex"
        - $ref: "#/components/parameters/PageSize"
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    $ref: "#/components/schemas/ByPage/properties/total"
                  data:
                    description: Array of project release objects.
                    type: array
                    items:
                      $ref: "#/components/schemas/ProjectRelease"

  /project-release/{owner}/{project}/{release}:
    get:
      tags:
        - Project Releases
      summary: Get a project release
      description: Retrieve details of a specific project release.
      security: []
      parameters:
        - name: owner
          description: Username of the project's owner.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/owner"
        - name: project
          description: Name of the project.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/name"
        - name: release
          description: Name of the project release to get.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/ProjectRelease/properties/name"
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProjectRelease"

  /asset:
    post:
      tags:
        - Assets
      summary: Create an asset
      description: |
        Create a new asset with the necessary details.

        #### Permission requirements

        - Only users with the `assetAdmin` role can create public assets.
        - Regular users can only create private assets.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - displayName
                - type
                - category
                - description
                - extraSettings
                - files
                - filesHash
                - visibility
              properties:
                displayName:
                  $ref: "#/components/schemas/Asset/properties/displayName"
                type:
                  $ref: "#/components/schemas/Asset/properties/type"
                category:
                  $ref: "#/components/schemas/Asset/properties/category"
                description:
                  $ref: "#/components/schemas/Asset/properties/description"
                extraSettings:
                  $ref: "#/components/schemas/Asset/properties/extraSettings"
                files:
                  $ref: "#/components/schemas/Asset/properties/files"
                filesHash:
                  $ref: "#/components/schemas/Asset/properties/filesHash"
                visibility:
                  $ref: "#/components/schemas/Asset/properties/visibility"
      responses:
        "201":
          description: Successfully created the asset.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Asset"
        "403":
          description: Insufficient permissions to perform this operation.

  /assets/list:
    get:
      tags:
        - Assets
      summary: List assets
      description: |
        Retrieve a paginated list of assets with optional filtering and ordering.

        #### Visibility rules

        | Authenticated (as alice) | Owner | Visibility | Access |
        |--------------------------|-------|------------|--------|
        | false | * | | All users' public assets (force `visibility=public`) |
        | false | * | public | All users' public assets |
        | false | * | private | `401 Unauthorized` |
        | false | alice | | Alice's public assets (force `visibility=public`) |
        | false | alice | public | Alice's public assets |
        | false | alice | private | `401 Unauthorized` |
        | true | * | | All alice's assets + others' public assets |
        | true | * | public | All users' public assets |
        | true | * | private | Alice's private assets |
        | true | alice | | All alice's assets |
        | true | alice | public | Alice's public assets |
        | true | alice | private | Alice's private assets |
        | true | bob | | Bob's public assets (force `visibility=public`) |
        | true | bob | public | Bob's public assets |
        | true | bob | private | `401 Unauthorized` |
      security:
        - {}
        - bearerAuth: []
      parameters:
        - name: keyword
          description: Filter assets by display name pattern.
          in: query
          schema:
            $ref: "#/components/schemas/Asset/properties/displayName"
        - name: owner
          description: |
            Filter assets by owner's username.

            Defaults to the authenticated user if not specified. Use `*` to include assets from all users.
          in: query
          schema:
            $ref: "#/components/schemas/User/properties/username"
        - name: type
          description: Filter assets by type.
          in: query
          schema:
            $ref: "#/components/schemas/Asset/properties/type"
        - name: category
          description: Filter assets by category.
          in: query
          schema:
            $ref: "#/components/schemas/Asset/properties/category"
        - name: filesHash
          description: Filter assets by files hash.
          in: query
          schema:
            $ref: "#/components/schemas/Asset/properties/filesHash"
        - name: visibility
          description: Filter assets by visibility.
          in: query
          schema:
            $ref: "#/components/schemas/Asset/properties/visibility"
        - name: orderBy
          description: Field by which to order the results.
          in: query
          schema:
            type: string
            enum:
              - createdAt
              - updatedAt
            examples:
              - createdAt
        - $ref: "#/components/parameters/SortOrder"
        - $ref: "#/components/parameters/PageIndex"
        - $ref: "#/components/parameters/PageSize"
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    $ref: "#/components/schemas/ByPage/properties/total"
                  data:
                    description: Array of asset objects.
                    type: array
                    items:
                      $ref: "#/components/schemas/Asset"

  /asset/{id}:
    get:
      tags:
        - Assets
      summary: Get an asset
      description: Retrieve details of a specific asset.
      security:
        - {}
        - bearerAuth: []
      parameters:
        - name: id
          description: ID of the asset to get.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Model/properties/id"
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Asset"
    put:
      tags:
        - Assets
      summary: Update an asset
      description: |
        Update the details of a specific asset.

        #### Permission requirements

        - Only users with the `assetAdmin` role can update assets to public visibility.
        - Asset owners can update their private assets.
      parameters:
        - name: id
          description: ID of the asset to update.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Model/properties/id"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - displayName
                - type
                - category
                - description
                - extraSettings
                - files
                - filesHash
                - visibility
              properties:
                displayName:
                  $ref: "#/components/schemas/Asset/properties/displayName"
                type:
                  $ref: "#/components/schemas/Asset/properties/type"
                category:
                  $ref: "#/components/schemas/Asset/properties/category"
                description:
                  $ref: "#/components/schemas/Asset/properties/description"
                extraSettings:
                  $ref: "#/components/schemas/Asset/properties/extraSettings"
                files:
                  $ref: "#/components/schemas/Asset/properties/files"
                filesHash:
                  $ref: "#/components/schemas/Asset/properties/filesHash"
                visibility:
                  $ref: "#/components/schemas/Asset/properties/visibility"
      responses:
        "200":
          description: Successfully updated the asset.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Asset"
        "403":
          description: Insufficient permissions to perform this operation.
    delete:
      tags:
        - Assets
      summary: Delete an asset
      description: Permanently delete a specific asset by its ID.
      parameters:
        - name: id
          description: ID of the asset to delete.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Model/properties/id"
      responses:
        "204":
          description: Successfully deleted the asset.

  /course:
    post:
      tags:
        - Courses
      summary: Create a course
      description: |
        Create a new course with the necessary details.

        #### Permission requirements

        - Only users with the `courseAdmin` role can create courses.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - thumbnail
                - entrypoint
                - references
                - prompt
              properties:
                title:
                  $ref: "#/components/schemas/Course/properties/title"
                thumbnail:
                  $ref: "#/components/schemas/Course/properties/thumbnail"
                entrypoint:
                  $ref: "#/components/schemas/Course/properties/entrypoint"
                references:
                  $ref: "#/components/schemas/Course/properties/references"
                prompt:
                  $ref: "#/components/schemas/Course/properties/prompt"
      responses:
        "201":
          description: Successfully created the course.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Course"
        "403":
          description: Insufficient permissions to perform this operation.

  /courses/list:
    get:
      tags:
        - Courses
      summary: List courses
      description: Retrieve a paginated list of courses with optional filtering and ordering.
      security:
        - {}
        - bearerAuth: []
      parameters:
        - name: courseSeriesID
          description: Filter courses by the course series ID.
          in: query
          schema:
            type: string
        - name: owner
          description: |
            Filter courses by the owner's username.

            Defaults to the authenticated user if not specified. Use `*` to include courses from all users.
          in: query
          schema:
            $ref: "#/components/schemas/User/properties/username"
        - name: orderBy
          description: Field by which to order the results.
          in: query
          schema:
            type: string
            enum:
              - createdAt
              - updatedAt
              - sequenceInCourseSeries
            default: createdAt
            examples:
              - createdAt
        - $ref: "#/components/parameters/SortOrder"
        - $ref: "#/components/parameters/PageIndex"
        - $ref: "#/components/parameters/PageSize"
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    $ref: "#/components/schemas/ByPage/properties/total"
                  data:
                    description: Array of course objects.
                    type: array
                    items:
                      $ref: "#/components/schemas/Course"

  /course/{id}:
    get:
      tags:
        - Courses
      summary: Get a course
      description: Retrieve details of a specific course.
      security:
        - {}
        - bearerAuth: []
      parameters:
        - name: id
          description: ID of the course to get.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Model/properties/id"
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Course"
    put:
      tags:
        - Courses
      summary: Update a course
      description: |
        Update the details of a specific course.

        #### Permission requirements

        - Only users with the `courseAdmin` role can update courses.
      parameters:
        - name: id
          description: ID of the course to update.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Model/properties/id"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - thumbnail
                - entrypoint
                - references
                - prompt
              properties:
                title:
                  $ref: "#/components/schemas/Course/properties/title"
                thumbnail:
                  $ref: "#/components/schemas/Course/properties/thumbnail"
                entrypoint:
                  $ref: "#/components/schemas/Course/properties/entrypoint"
                references:
                  $ref: "#/components/schemas/Course/properties/references"
                prompt:
                  $ref: "#/components/schemas/Course/properties/prompt"
      responses:
        "200":
          description: Successfully updated the course.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Course"
        "403":
          description: Insufficient permissions to perform this operation.
    delete:
      tags:
        - Courses
      summary: Delete a course
      description: |
        Permanently delete a specific course by its ID.

        #### Permission requirements

        - Only users with the `courseAdmin` role can delete courses.
      parameters:
        - name: id
          description: ID of the course to delete.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Model/properties/id"
      responses:
        "204":
          description: Successfully deleted the course.
        "403":
          description: Insufficient permissions to perform this operation.

  /course-series:
    post:
      tags:
        - Course Series
      summary: Create a course series
      description: |
        Create a new course series with the necessary details.

        #### Permission requirements

        - Only users with the `courseAdmin` role can create course series.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - courseIDs
                - order
              properties:
                title:
                  $ref: "#/components/schemas/CourseSeries/properties/title"
                thumbnail:
                  $ref: "#/components/schemas/CourseSeries/properties/thumbnail"
                description:
                  $ref: "#/components/schemas/CourseSeries/properties/description"
                courseIDs:
                  $ref: "#/components/schemas/CourseSeries/properties/courseIDs"
                order:
                  $ref: "#/components/schemas/CourseSeries/properties/order"
      responses:
        "201":
          description: Successfully created the course series.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CourseSeries"
        "403":
          description: Insufficient permissions to perform this operation.

  /course-serieses/list:
    get:
      tags:
        - Course Series
      summary: List course series
      description: Retrieve a paginated list of course series with optional filtering and ordering.
      security:
        - {}
        - bearerAuth: []
      parameters:
        - name: orderBy
          description: Field by which to order the results.
          in: query
          schema:
            type: string
            enum:
              - createdAt
              - updatedAt
              - order
            default: order
            examples:
              - order
        - name: owner
          description: |
            Filter course serieses by the owner's username.

            Defaults to the authenticated user if not specified. Use `*` to include course series from all users.
          in: query
          schema:
            $ref: "#/components/schemas/User/properties/username"
        - $ref: "#/components/parameters/SortOrder"
        - $ref: "#/components/parameters/PageIndex"
        - $ref: "#/components/parameters/PageSize"
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    $ref: "#/components/schemas/ByPage/properties/total"
                  data:
                    description: Array of course series objects.
                    type: array
                    items:
                      $ref: "#/components/schemas/CourseSeries"

  /course-series/{id}:
    get:
      tags:
        - Course Series
      summary: Get a course series
      description: Retrieve details of a specific course series.
      security:
        - {}
        - bearerAuth: []
      parameters:
        - name: id
          description: ID of the course series to get.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Model/properties/id"
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CourseSeries"
    put:
      tags:
        - Course Series
      summary: Update a course series
      description: |
        Update the details of a specific course series.

        #### Permission requirements

        - Only users with the `courseAdmin` role can update course series.
      parameters:
        - name: id
          description: ID of the course series to update.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Model/properties/id"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - courseIDs
                - order
              properties:
                title:
                  $ref: "#/components/schemas/CourseSeries/properties/title"
                thumbnail:
                  $ref: "#/components/schemas/CourseSeries/properties/thumbnail"
                description:
                  $ref: "#/components/schemas/CourseSeries/properties/description"
                courseIDs:
                  $ref: "#/components/schemas/CourseSeries/properties/courseIDs"
                order:
                  $ref: "#/components/schemas/CourseSeries/properties/order"
      responses:
        "200":
          description: Successfully updated the course series.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CourseSeries"
        "403":
          description: Insufficient permissions to perform this operation.
    delete:
      tags:
        - Course Series
      summary: Delete a course series
      description: |
        Permanently delete a specific course series by its ID.

        #### Permission requirements

        - Only users with the `courseAdmin` role can delete course series.
      parameters:
        - name: id
          description: ID of the course series to delete.
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Model/properties/id"
      responses:
        "204":
          description: Successfully deleted the course series.
        "403":
          description: Insufficient permissions to perform this operation.

  /copilot/message:
    post:
      tags:
        - Copilot
      summary: Generate a message
      description: |
        Generate a message by sending a list of input messages.

        #### Quota & rate limits

        - Each message consumes 1 quota from the authenticated user's allowance.
        - Per-user short-window rate limits also apply to prevent bursts. Hitting them returns 429 with `Retry-After`.
        - Long-window quota limits vary based on the authenticated user's plan.
        - When the long-window quota limit is reached, the 403 response includes a `Retry-After` header with the wait
          time in seconds.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - messages
              properties:
                messages:
                  description: Input messages.
                  type: array
                  items:
                    $ref: "#/components/schemas/CopilotMessage"
                  examples:
                    - - role: user
                        content:
                          type: text
                          text: Hello, world!
                tools:
                  description: Use Mcp tools.
                  type: array
                  items:
                    $ref: "#/components/schemas/CopilotTool"
                  examples:
                    - - type: function
                        function:
                          name: create_project
                          description: Create a new project.
                          parameters: { "name": "My Project" }

      responses:
        "201":
          description: Message successfully generated.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CopilotMessage"
                examples:
                  - role: copilot
                    content:
                      type: text
                      text: Hello!
        "403":
          description: Insufficient permissions or quota to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the long-window quota limit.
              schema:
                type: integer
        "429":
          description: Too many requests to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the short-window rate limit.
              schema:
                type: integer

  /copilot/stream/message:
    post:
      tags:
        - Copilot
      summary: Generate a stream message
      description: |
        Generate a stream message by sending a list of input messages.

        #### Quota & rate limits

        - Each message consumes 1 quota from the authenticated user's allowance.
        - Per-user short-window rate limits also apply to prevent bursts. Hitting them returns 429 with `Retry-After`.
        - Long-window quota limits vary based on the authenticated user's plan.
        - When the long-window quota limit is reached, the 403 response includes a `Retry-After` header with the wait
          time in seconds.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - messages
              properties:
                messages:
                  description: Input messages.
                  type: array
                  items:
                    $ref: "#/components/schemas/CopilotMessage"
                  examples:
                    - - role: user
                        content:
                          type: text
                          text: Hello, world!
                tools:
                  description: Use Mcp tools.
                  type: array
                  items:
                    $ref: "#/components/schemas/CopilotTool"
                  examples:
                    - - type: function
                        function:
                          name: create_project
                          description: Create a new project.
                          parameters: { "name": "My Project" }
      responses:
        "201":
          description: Stream Message successfully generated.
          content:
            application/stream:
        "403":
          description: Insufficient permissions or quota to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the long-window quota limit.
              schema:
                type: integer
        "429":
          description: Too many requests to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the short-window rate limit.
              schema:
                type: integer

  /workflow/stream/message:
    post:
      tags:
        - Workflow
      summary: Generate a stream message from workflow
      description: |
        Generate a stream message by sending a list of input messages.

        #### Quota & rate limits

        - Each workflow execution may consume multiple quotas from the authenticated user's allowance.
        - Per-user short-window rate limits also apply to prevent bursts. Hitting them returns 429 with `Retry-After`.
        - Long-window quota limits vary based on the authenticated user's plan.
        - When the long-window quota limit is reached, the 403 response includes a `Retry-After` header with the wait
          time in seconds.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - messages
              properties:
                messages:
                  description: Input messages.
                  type: array
                  items:
                    $ref: "#/components/schemas/CopilotMessage"
                  examples:
                    - - role: user
                        content:
                          type: text
                          text: Hello, world!
                tools:
                  description: Use Mcp tools.
                  type: array
                  items:
                    $ref: "#/components/schemas/CopilotTool"
                  examples:
                    - - type: function
                        function:
                          name: create_project
                          description: Create a new project.
                          parameters: { "name": "My Project" }
                workflow:
                  description: Environment variables of the workflow.
                  $ref: "#/components/schemas/Workflow"
      responses:
        "201":
          description: Stream Message successfully generated.
          content:
            application/stream:
        "403":
          description: Insufficient permissions or quota to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the long-window quota limit.
              schema:
                type: integer
        "429":
          description: Too many requests to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the short-window rate limit.
              schema:
                type: integer

  /ai/description:
    post:
      tags:
        - AI
      summary: Generate AI description
      description: |
        Generate an AI-powered descriptive summary of a game from the player's perspective based on provided game
        content (such as spx source code and project structure).

        #### Quota & rate limits

        - Each request consumes 1 quota from the authenticated user's AI description allowance.
        - Per-user short-window rate limits also apply to prevent bursts. Hitting them returns 429 with `Retry-After`.
        - Quota limits vary based on the authenticated user's plan.
        - When the long-window quota limit is reached, the 403 response includes a `Retry-After` header with the wait
          time in seconds.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - content
              properties:
                content:
                  description: The game content to generate a description for (e.g., spx source code, project structure).
                  type: string
                  examples:
                    - |
                      Game: TicTacToe
                      Description: A classic Tic-Tac-Toe game.

                      === File: main.spx ===
                      var (
                          // board is the main Tic-Tac-Toe board, where 1 represents "X" and 2 represents "O".
                          board [3][3]int
                      )

                      // onStart handles the game start event.
                      onStart => {
                        // ...
                      }
      responses:
        "200":
          description: Successfully generated AI description.
          content:
            application/json:
              schema:
                type: object
                properties:
                  description:
                    description: AI-generated descriptive summary of the game world from the player's perspective.
                    type: string
                    examples:
                      - |
                        This is a Tic-Tac-Toe game played on a 3x3 grid. The player uses `X` marks while the AI opponent
                        uses `O` marks. Players take turns placing their marks in empty squares, with the goal of getting
                        three marks in a row horizontally, vertically, or diagonally. The game supports mouse click
                        interaction. Click on an empty square to place your mark. The game ends when either player
                        achieves three in a row or the board is completely filled.
        "403":
          description: Insufficient permissions or quota to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the long-window quota limit.
              schema:
                type: integer
        "429":
          description: Too many requests to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the short-window rate limit.
              schema:
                type: integer

  /ai/interaction/turn:
    post:
      tags:
        - AI
      summary: Perform an AI interaction turn
      description: |
        Send a message and context to the AI, receive a response including text and an optional command.

        #### Quota & rate limits

        - Each turn consumes 1 quota from the authenticated user's AI interaction turn allowance.
        - Per-user short-window rate limits also apply to prevent bursts. Hitting them returns 429 with `Retry-After`.
        - Long-window quota limits vary based on the authenticated user's plan.
        - When the long-window quota limit is reached, the 403 response includes a `Retry-After` header with the wait
          time in seconds.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                content:
                  description: The core user input message.
                  type: string
                  examples:
                    - What should I do next?
                context:
                  description: Specific context for the current user input.
                  type: object
                  additionalProperties: true
                  examples:
                    - position: [10, 20]
                      health: 80
                role:
                  description: Persona the AI should adopt.
                  type: string
                  examples:
                    - Guide
                roleContext:
                  description: Additional context specific to the role.
                  type: object
                  additionalProperties: true
                  examples:
                    - style: friendly
                      knowledgeScope: game rules
                knowledgeBase:
                  description: Background knowledge provided to the AI.
                  type: object
                  additionalProperties: true
                  examples:
                    - worldName: TestWorld
                      gravity: 9.8
                commandSpecs:
                  description: Commands the AI is allowed to call.
                  type: array
                  items:
                    type: object
                    properties:
                      name:
                        description: Unique identifier for the command.
                        type: string
                        examples:
                          - Move
                      description:
                        description: Explanation of what the command does.
                        type: string
                        examples:
                          - Move the character
                      parameters:
                        description: Parameters the command accepts.
                        type: array
                        items:
                          type: object
                          properties:
                            name:
                              description: Parameter name.
                              type: string
                              examples:
                                - Direction
                            type:
                              description: Go type name of the parameter.
                              type: string
                              examples:
                                - string
                            description:
                              description: Purpose of the parameter.
                              type: string
                              examples:
                                - "Direction to move: up, down, left, right"
                history:
                  description: Record of previous interactions in this session.
                  type: array
                  items:
                    $ref: "#/components/schemas/AIInteractionTurn"
                archivedHistory:
                  description: Content of archived historical interactions.
                  type: string
                  examples:
                    - "Previous conversation summary..."
                continuationTurn:
                  description: |
                    Current turn number in a multi-turn interaction sequence.

                    A value of 0 means this is the initial turn from user input. Values > 0 indicate continuation turns
                    where the AI continues the current interaction sequence based on the outcomes of commands executed
                    within this sequence.
                  type: integer
                  format: int32
                  minimum: 0
                  default: 0
                  examples:
                    - 0
      responses:
        "200":
          description: Successful AI interaction.
          content:
            application/json:
              schema:
                type: object
                properties:
                  text:
                    description: Textual part of the AI's response.
                    type: string
                    examples:
                      - Okay, I suggest moving to (1, 1).
                  commandName:
                    description: Name of the command the AI wants to execute.
                    type: string
                    examples:
                      - MakeMove
                  commandArgs:
                    description: Arguments for the command to be executed.
                    type: object
                    additionalProperties: true
                    examples:
                      - Row: 1
                        Col: 1
                        Result: ""
        "403":
          description: Insufficient permissions or quota to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the long-window quota limit.
              schema:
                type: integer
        "429":
          description: Too many requests to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the short-window rate limit.
              schema:
                type: integer

  /ai/interaction/archive:
    post:
      tags:
        - AI
      summary: Archive AI interaction history
      description: |
        Archive a batch of interaction turns into a condensed summary for future context.

        #### Quota & rate limits

        - Each archive request consumes 1 quota from the authenticated user's AI interaction archive allowance.
        - Per-user short-window rate limits also apply to prevent bursts. Hitting them returns 429 with `Retry-After`.
        - Long-window quota limits vary based on the authenticated user's plan.
        - When the long-window quota limit is reached, the 403 response includes a `Retry-After` header with the wait
          time in seconds.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - turns
              properties:
                turns:
                  description: Interaction turns to be archived.
                  type: array
                  items:
                    $ref: "#/components/schemas/AIInteractionTurn"
                existingArchive:
                  description: Existing archived content to be merged with new turns.
                  type:
                    - string
                    - "null"
                  examples:
                    - "Previous conversation summary..."
      responses:
        "200":
          description: Successfully archived interaction history.
          content:
            application/json:
              schema:
                type: object
                properties:
                  content:
                    description: The consolidated archive content.
                    type: string
                    examples:
                      - "Complete conversation summary including new turns..."
        "403":
          description: Insufficient permissions or quota to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the long-window quota limit.
              schema:
                type: integer
        "429":
          description: Too many requests to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the short-window rate limit.
              schema:
                type: integer

  /aigc/task:
    post:
      tags:
        - AIGC
      summary: Create an AIGC task
      description: |
        Create an asynchronous AIGC task for resource-intensive operations like image generation, video generation, or
        audio generation.

        All generation operations are processed asynchronously. Use the returned task ID to poll for status via
        `GET /aigc/task/{taskID}` or subscribe to real-time updates via `GET /aigc/task/{taskID}/events`.

        #### Supported task types

        | Type | Description |
        |------|-------------|
        | `removeBackground` | Remove image background |
        | `generateCostume` | Generate costume image |
        | `generateAnimationVideo` | Generate animation video |
        | `extractVideoFrames` | Extract frames from video |
        | `generateBackdrop` | Generate backdrop image |

        #### Quota & rate limits

        - Each task consumes quota from the authenticated user's AIGC allowance based on the task type.
        - Per-user short-window rate limits apply. Hitting them returns 429 with `Retry-After`.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - type
                - parameters
              properties:
                type:
                  $ref: "#/components/schemas/AIGCTask/properties/type"
                parameters:
                  description: Task parameters. Structure depends on task type.
                  oneOf:
                    - title: removeBackground
                      type: object
                      required:
                        - imageUrl
                      properties:
                        imageUrl:
                          description: URL of the image to remove background from.
                          type: string
                          format: uri
                          examples:
                            - https://example.com/character.png
                    - title: generateCostume
                      type: object
                      required:
                        - settings
                      properties:
                        settings:
                          $ref: "#/components/schemas/AIGCCostumeSettings"
                    - title: generateAnimationVideo
                      type: object
                      required:
                        - settings
                      properties:
                        settings:
                          $ref: "#/components/schemas/AIGCAnimationSettings"
                    - title: extractVideoFrames
                      type: object
                      required:
                        - videoUrl
                      properties:
                        videoUrl:
                          description: URL of the video to extract frames from.
                          type: string
                          format: uri
                          examples:
                            - https://example.com/animation.mp4
                        interval:
                          description: Interval between frames in milliseconds.
                          type: integer
                          minimum: 50
                          maximum: 1000
                          default: 100
                          examples:
                            - 100
                    - title: generateBackdrop
                      type: object
                      required:
                        - settings
                      properties:
                        settings:
                          $ref: "#/components/schemas/AIGCBackdropSettings"
      responses:
        "202":
          description: Task accepted and queued for processing.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AIGCTask"
        "400":
          description: Invalid task type or parameters.
        "403":
          description: Insufficient permissions or quota.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the long-window quota limit.
              schema:
                type: integer
        "429":
          description: Too many requests.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the short-window rate limit.
              schema:
                type: integer

  /aigc/task/{taskID}:
    get:
      tags:
        - AIGC
      summary: Get AIGC task status
      description: |
        Get the current status of an AIGC task.

        Poll this endpoint to check if the task is complete. For real-time updates, use the SSE endpoint
        `GET /aigc/task/{taskID}/events` instead.
      parameters:
        - name: taskID
          description: The task ID to get.
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Task status retrieved.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AIGCTask"
        "404":
          description: Task not found.

  /aigc/task/{taskID}/events:
    get:
      tags:
        - AIGC
      summary: Subscribe to AIGC task events
      description: |
        Subscribe to real-time task status updates via Server-Sent Events (SSE).

        The first event is always a `snapshot` containing the current task state. This eliminates the need to call
        `GET /aigc/task/{taskID}` separately and avoids race conditions between fetching current state and subscribing
        to updates.

        The connection remains open until the task completes, is cancelled, or fails. If the task is already in a
        terminal state (`completed`, `cancelled`, or `failed`) when connecting, the `snapshot` event will contain the
        final state and the connection will close immediately.

        #### Event types

        | Event | Data | Description |
        |-------|------|-------------|
        | `snapshot` | Full `AIGCTask` object | Initial state, always sent first |
        | `progress` | `{"progress": 45, "message": "..."}` | Task progress update |
        | `cancelling` | `{}` | Task cancellation in progress |
        | `completed` | `{"result": {...}}` | Task completed successfully |
        | `cancelled` | `{}` | Task was cancelled |
        | `failed` | `{"error": {"reason": "...", "message": "..."}}` | Task failed |

        #### Example: task in progress

        ```
        GET /aigc/task/task-123/events

        event: snapshot
        data: {"id": "task-123", "status": "processing", "progress": 10, "message": "Starting..."}

        event: progress
        data: {"progress": 50, "message": "Generating image..."}

        event: progress
        data: {"progress": 90, "message": "Post-processing..."}

        event: completed
        data: {"result": {"imageUrl": "https://..."}}
        ```

        #### Example: task already completed

        ```
        GET /aigc/task/task-456/events

        event: snapshot
        data: {"id": "task-456", "status": "completed", "result": {"imageUrl": "https://..."}}

        (connection closed)
        ```

        #### Example: task pending

        ```
        GET /aigc/task/task-789/events

        event: snapshot
        data: {"id": "task-789", "status": "pending", "progress": null, "message": null}

        event: progress
        data: {"progress": 0, "message": "Task started"}

        ...
        ```

        #### Example: task cancelled

        ```
        GET /aigc/task/task-abc/events

        event: snapshot
        data: {"id": "task-abc", "status": "processing", "progress": 30, "message": "Generating..."}

        event: cancelling
        data: {}

        event: cancelled
        data: {}

        (connection closed)
        ```
      parameters:
        - name: taskID
          description: The task ID to subscribe to.
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: SSE stream established.
          content:
            text/event-stream:
              schema:
                type: string
                description: Server-Sent Events stream.
        "404":
          description: Task not found.

  /aigc/task/{taskID}/cancellation:
    post:
      tags:
        - AIGC
      summary: Cancel an AIGC task
      description: |
        Cancel a pending or processing AIGC task.

        If subscribed via `GET /aigc/task/{taskID}/events`, a `cancelling` event will be emitted when cancellation
        begins, followed by a `cancelled` event when complete.

        #### Cancellation rules

        | Current Status | Result |
        |----------------|--------|
        | `pending` | Immediately `cancelled`, quota refunded |
        | `processing` | Transitions to `cancelling`, then `cancelled` |
        | `cancelling` | No-op, returns current state |
        | `completed` | `409 Conflict` |
        | `cancelled` | No-op (idempotent), returns current state |
        | `failed` | `409 Conflict` |

        #### Quota refund

        - Tasks cancelled from `pending` status receive a full quota refund.
        - Tasks cancelled from `processing` status do not receive a refund (resources already consumed).
      parameters:
        - name: taskID
          description: The task ID to cancel.
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Cancellation accepted or task already cancelled.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AIGCTask"
        "404":
          description: Task not found.
        "409":
          description: Task cannot be cancelled because it has already completed or failed.

  /aigc/asset-settings/enrichment:
    post:
      tags:
        - AIGC
      summary: Enrich asset settings
      description: |
        Use AI to enrich partial asset settings with detailed descriptions and parameters.

        #### Quota & rate limits

        - Each request consumes 1 quota from the authenticated user's AIGC allowance.
        - Per-user short-window rate limits apply. Hitting them returns 429 with `Retry-After`.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - assetType
                - input
              properties:
                assetType:
                  description: Type of asset to enrich settings for.
                  type: string
                  enum:
                    - sprite
                    - costume
                    - animation
                    - backdrop
                input:
                  description: User's text description of the asset.
                  type: string
                  examples:
                    - A fire demon character with glowing ember cracks
                settings:
                  description: Optional partial settings to be enriched. Structure depends on assetType.
                  oneOf:
                    - $ref: "#/components/schemas/AIGCSpriteSettings"
                    - $ref: "#/components/schemas/AIGCCostumeSettings"
                    - $ref: "#/components/schemas/AIGCAnimationSettings"
                    - $ref: "#/components/schemas/AIGCBackdropSettings"
                spriteSettings:
                  description: Optional existing sprite settings to provide context for enrichment. Only used when
                    `assetType` is `costume` or `animation`.
                  $ref: "#/components/schemas/AIGCSpriteSettings"
                projectSettings:
                  description: Optional project settings to provide context for enrichment.
                  $ref: "#/components/schemas/AIGCProjectSettings"
      responses:
        "200":
          description: Successfully enriched settings.
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: "#/components/schemas/AIGCSpriteSettings"
                  - $ref: "#/components/schemas/AIGCCostumeSettings"
                  - $ref: "#/components/schemas/AIGCAnimationSettings"
                  - $ref: "#/components/schemas/AIGCBackdropSettings"
        "403":
          description: Insufficient permissions or quota.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the long-window quota limit.
              schema:
                type: integer
        "429":
          description: Too many requests.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the short-window rate limit.
              schema:
                type: integer

  /aigc/sprite/content-settings:
    post:
      tags:
        - AIGC
      summary: Generate sprite content settings
      description: |
        Generate costume and animation settings for a sprite based on its settings.

        #### Quota & rate limits

        - Each request consumes 1 quota from the authenticated user's AIGC allowance.
        - Per-user short-window rate limits apply. Hitting them returns 429 with `Retry-After`.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - settings
              properties:
                settings:
                  $ref: "#/components/schemas/AIGCSpriteSettings"
      responses:
        "200":
          description: Successfully generated content settings.
          content:
            application/json:
              schema:
                type: object
                properties:
                  costumes:
                    description: Settings for costumes to generate.
                    type: array
                    items:
                      $ref: "#/components/schemas/AIGCCostumeSettings"
                  animations:
                    description: Settings for animations to generate.
                    type: array
                    items:
                      $ref: "#/components/schemas/AIGCAnimationSettings"
        "403":
          description: Insufficient permissions or quota.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the long-window quota limit.
              schema:
                type: integer
        "429":
          description: Too many requests.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the short-window rate limit.
              schema:
                type: integer

  /aigc/matting:
    post:
      tags:
        - AIGC
      deprecated: true
      summary: Remove image background
      description: |
        Process the provided image URL to remove its background, resulting in a transparent background.

        **Deprecated**: This endpoint is deprecated and will be removed in a future version. Use `POST /aigc/task` with
        `type: "removeBackground"` instead, which provides progress tracking and better reliability for long-running
        operations.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - imageUrl
              properties:
                imageUrl:
                  description: URL of the image to process for background removal.
                  type: string
                  format: uri
      responses:
        "200":
          description: Successfully processed the image for background removal.
          content:
            application/json:
              schema:
                type: object
                properties:
                  resultUrl:
                    description: URL of the processed image with background removed.
                    type: string
                    format: uri

  /util/upinfo:
    get:
      tags:
        - Utils
      summary: Get upload information
      description: Retrieve necessary information and tokens required for file uploads.
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UpInfo"

  /util/fileurls:
    post:
      tags:
        - Utils
      summary: Generate signed URLs for files
      description: Create signed web URLs for the specified files to allow secure access.
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                objects:
                  description: List of universal URLs of the objects.
                  type: array
                  items:
                    type: string
                  examples:
                    - - kodo://goplus-builder-usercontent-test/files/FjgMMuSaAsRWx1t7UAQnQ5r4YsAe-195
      responses:
        "201":
          description: Successfully generated signed URLs for the files.
          content:
            application/json:
              schema:
                type: object
                properties:
                  objectUrls:
                    description: Map from universal URLs to signed web URLs for the objects.
                    type: array
                    items:
                      type: object
                    examples:
                      - - kodo://goplus-builder-usercontent-test/files/FjgMMuSaAsRWx1t7UAQnQ5r4YsAe-195: https://builder-usercontent.gopluscdn.com/files/FjgMMuSaAsRWx1t7UAQnQ5r4YsAe-195?e=1727658000&token=t_6AOOkCdDu4m7fPleblcK0gMBZfbGQzeEIVt5Au:EMJdLqcCWrqQ5pRd01diOv7nhQw=

  /util/sb2xbp:
    post:
      tags:
        - Utils
      summary: Convert Scratch to XBP
      description: |
        Convert a Scratch format file to XBP (XBuilder Project) format.

        This endpoint accepts a Scratch project file (version 2 or 3) and converts it to the XBP format
        used by the XBuilder platform.
      security:
        - {}
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - file
              properties:
                file:
                  description: |
                    Scratch project file (e.g. .sb2, .sb3 or project zip). Form field name must be `file`, Maximum size
                    32 MiB.
                  type: string
                  format: binary
                  maxLength: 33554432
      responses:
        "201":
          description: Conversion successful. Returns a zip archive containing the .xbp project file.
          content:
            application/zip:
              schema:
                type: string
                format: binary
              examples:
                xbpFile:
                  summary: Example XBP zip file

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: Access token, in the format `Bearer {token}`.

  schemas:
    Model:
      type: object
      description: Base model with common fields for all entities.
      properties:
        id:
          description: Unique identifier.
          type: string
          format: int64
          examples:
            - 1
        createdAt:
          description: Creation timestamp.
          type: string
          format: date-time
          examples:
            - 2006-01-02T15:04:05Z07:00
        updatedAt:
          description: Last update timestamp.
          type: string
          format: date-time
          examples:
            - 2006-01-02T15:04:05Z07:00

    Visibility:
      description: Visibility setting for resources.
      type: string
      enum:
        - private
        - public
      examples:
        - private

    User:
      description: User account information.
      type: object
      properties:
        id:
          $ref: "#/components/schemas/Model/properties/id"
        createdAt:
          $ref: "#/components/schemas/Model/properties/createdAt"
        updatedAt:
          $ref: "#/components/schemas/Model/properties/updatedAt"
        username:
          description: Unique username of the user.
          type: string
          examples:
            - john
        displayName:
          description: Display name of the user.
          type: string
          examples:
            - John Doe
        avatar:
          description: URL of the user's avatar image.
          type: string
          format: uri
          examples:
            - https://avatars.githubusercontent.com/u/10137?v=4
        description:
          description: Brief bio or description of the user.
          type: string
          examples:
            - Two giants live in Britain's land...
        plan:
          description: Subscription plan of the user.
          type: string
          enum:
            - free
            - plus
          examples:
            - free
        followerCount:
          description: Number of followers the user has.
          type: integer
          format: int64
          minimum: 0
          examples:
            - 1
        followingCount:
          description: Number of users the user is following.
          type: integer
          format: int64
          minimum: 0
          examples:
            - 1
        projectCount:
          description: Total number of projects created by the user.
          type: integer
          format: int64
          minimum: 0
          examples:
            - 1
        publicProjectCount:
          description: Number of public projects created by the user.
          type: integer
          format: int64
          minimum: 0
          examples:
            - 1
        likedProjectCount:
          description: Number of projects liked by the user.
          type: integer
          format: int64
          minimum: 0
          examples:
            - 1
        capabilities:
          description: |
            Capabilities of the user.

            **This field is only present for the authenticated user's own profile.**
          oneOf:
            - $ref: "#/components/schemas/UserCapabilities"
            - type: "null"

    UserCapabilities:
      type: object
      description: User permission capabilities.
      properties:
        canManageAssets:
          description: Whether the user can manage asset library.
          type: boolean
          examples:
            - true
        canManageCourses:
          description: Whether the user can manage courses and course series.
          type: boolean
          examples:
            - true
        canUsePremiumLLM:
          description: Whether the user can access premium LLM models.
          type: boolean
          examples:
            - true

    Project:
      type: object
      description: Project information including files, metadata, and statistics.
      properties:
        id:
          $ref: "#/components/schemas/Model/properties/id"
        createdAt:
          $ref: "#/components/schemas/Model/properties/createdAt"
        updatedAt:
          $ref: "#/components/schemas/Model/properties/updatedAt"
        owner:
          $ref: "#/components/schemas/User/properties/username"
        remixedFrom:
          description: Full name of the project release from which the project is remixed.
          oneOf:
            - $ref: "#/components/schemas/ProjectReleaseFullName"
            - type: "null"
        latestRelease:
          description: Latest release of the project.
          oneOf:
            - $ref: "#/components/schemas/ProjectRelease"
            - type: "null"
        name:
          description: Unique name of the project.
          type: string
          examples:
            - NiuXiaoQi
        version:
          description: Version number of the project.
          type: integer
          format: int32
          examples:
            - 1
        files:
          description: File paths and their corresponding universal URLs associated with the project.
          type: object
          examples:
            - NiuXiaoQi.spx: data:;,
              assets/backdrop.jpeg: kodo://goplus-builder-usercontent-test/files/FnPtX9heX2eXE8vRIiITmFXQVAOz-5352
              assets/index.json: data:application/json,%7B%22backdrops%22%3A%5B%7B%22x%22%3A0%2C%22y%22%3A0%2C%22faceRight%22%3A0%2C%22bitmapResolution%22%3A2%2C%22name%22%3A%22backdrop%22%2C%22path%22%3A%22backdrop.png%22%2C%22builder_id%22%3A%22LGH5r3l8lDocud3zzlq3D%22%7D%5D%2C%22backdropIndex%22%3A0%2C%22map%22%3A%7B%22width%22%3A480%2C%22height%22%3A360%2C%22mode%22%3A%22fillRatio%22%7D%2C%22run%22%3A%7B%22width%22%3A480%2C%22height%22%3A360%7D%2C%22zorder%22%3A%5B%22NiuXiaoQi%22%5D%2C%22builder_spriteOrder%22%3A%5B%22fZFB5R_Mwwq95FB6xIVYu%22%5D%2C%22builder_soundOrder%22%3A%5B%5D%7D
              assets/sprites/NiuXiaoQi/costume.png: kodo://goplus-builder-usercontent-test/files/FoSC8ngQn_jzAIPBqCp9VZLBVkSq-52661
              assets/sprites/NiuXiaoQi/index.json: data:application/json,%7B%22heading%22%3A90%2C%22x%22%3A0%2C%22y%22%3A0%2C%22size%22%3A1%2C%22rotationStyle%22%3A%22normal%22%2C%22costumeIndex%22%3A0%2C%22visible%22%3Atrue%2C%22isDraggable%22%3Afalse%2C%22pivot%22%3A%7B%22x%22%3A71%2C%22y%22%3A-75%7D%2C%22costumes%22%3A%5B%7B%22x%22%3A0%2C%22y%22%3A0%2C%22faceRight%22%3A0%2C%22bitmapResolution%22%3A2%2C%22name%22%3A%22costume%22%2C%22path%22%3A%22costume.png%22%2C%22builder_id%22%3A%22VCxSMAnlb3WI1IyikqjCV%22%7D%5D%2C%22fAnimations%22%3A%7B%7D%2C%22animBindings%22%3A%7B%7D%2C%22builder_id%22%3A%22fZFB5R_Mwwq95FB6xIVYu%22%7D
              main.spx: data:;,
        visibility:
          $ref: "#/components/schemas/Visibility"
        description:
          description: Brief description of the project.
          type: string
          examples:
            - NiuXiaoQi in your area.
        instructions:
          description: Instructions on how to interact with the project.
          type: string
          examples:
            - Just run it.
        extraSettings:
          description: Extra settings of the project.
          type: object
          examples:
            - source: auto
              artStyle: pixel-art
              perspective: side-scrolling
        thumbnail:
          description: URL of the project's thumbnail image.
          type: string
          format: uri
          examples:
            - https://example.com/project-thumbnail.png
        viewCount:
          description: Number of times the project has been viewed.
          type: integer
          format: int64
          minimum: 0
          examples:
            - 1
        likeCount:
          description: Number of likes the project has received.
          type: integer
          format: int64
          minimum: 0
          examples:
            - 1
        releaseCount:
          description: Number of releases associated with the project.
          type: integer
          format: int64
          minimum: 0
          examples:
            - 1
        remixCount:
          description: Number of times the project has been remixed.
          type: integer
          format: int64
          minimum: 0
          examples:
            - 1

    ProjectFullName:
      description: Full name of a project in the format `owner/project`.
      type: string
      examples:
        - john/NiuXiaoQi

    ProjectRelease:
      description: A versioned release of a project.
      type: object
      properties:
        id:
          $ref: "#/components/schemas/Model/properties/id"
        createdAt:
          $ref: "#/components/schemas/Model/properties/createdAt"
        updatedAt:
          $ref: "#/components/schemas/Model/properties/updatedAt"
        projectFullName:
          description: Full name of the project that the release is associated with, in the format `owner/project`.
          $ref: "#/components/schemas/ProjectFullName"
        name:
          description: Unique name of the project release, adhering to [Semantic Versioning 2.0.0](https://semver.org/spec/v2.0.0.html).
          type: string
          pattern: '^v(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$'
          examples:
            - v1.2.3
        description:
          description: Brief description of the release.
          type: string
          examples:
            - First release.
        files:
          description: File paths and their corresponding universal URLs associated with the release.
          $ref: "#/components/schemas/Project/properties/files"
        thumbnail:
          description: URL of the release's thumbnail image.
          $ref: "#/components/schemas/Project/properties/thumbnail"
        remixCount:
          description: Number of times the release has been remixed.
          $ref: "#/components/schemas/Project/properties/remixCount"

    ProjectReleaseFullName:
      description: Full name of a project release in the format `owner/project/release`.
      type: string
      examples:
        - john/NiuXiaoQi/v1.2.3

    Asset:
      description: Reusable asset such as sprite, backdrop, or sound.
      type: object
      properties:
        id:
          $ref: "#/components/schemas/Model/properties/id"
        createdAt:
          $ref: "#/components/schemas/Model/properties/createdAt"
        updatedAt:
          $ref: "#/components/schemas/Model/properties/updatedAt"
        owner:
          description: Username of the asset's owner.
          $ref: "#/components/schemas/User/properties/username"
        displayName:
          description: Display name of the asset.
          type: string
          examples:
            - NiuXiaoQi
        type:
          description: Type of the asset.
          type: string
          enum:
            - sprite
            - backdrop
            - sound
          examples:
            - sprite
        category:
          deprecated: true
          description: Category to which the asset belongs.
          type: string
          examples:
            - People
        description:
          description: Brief description of the asset.
          type: string
          examples:
            - A cute character sprite.
        extraSettings:
          description: Extra settings specific to the asset.
          type: object
          examples:
            - artStyle: pixel-art
              perspective: side-scrolling
        files:
          description: File paths and their corresponding universal URLs associated with the asset.
          type: object
          examples:
            - assets/sprites/NiuXiaoQi/costume.png: kodo://goplus-builder-usercontent-test/files/FoSC8ngQn_jzAIPBqCp9VZLBVkSq-52661
              assets/sprites/NiuXiaoQi/index.json: data:application/json,%7B%22heading%22%3A90%2C%22x%22%3A0%2C%22y%22%3A0%2C%22size%22%3A1%2C%22rotationStyle%22%3A%22normal%22%2C%22costumeIndex%22%3A0%2C%22visible%22%3Atrue%2C%22isDraggable%22%3Afalse%2C%22pivot%22%3A%7B%22x%22%3A71%2C%22y%22%3A-75%7D%2C%22costumes%22%3A%5B%7B%22x%22%3A0%2C%22y%22%3A0%2C%22faceRight%22%3A0%2C%22bitmapResolution%22%3A2%2C%22name%22%3A%22costume%22%2C%22path%22%3A%22costume.png%22%2C%22builder_id%22%3A%22VCxSMAnlb3WI1IyikqjCV%22%7D%5D%2C%22fAnimations%22%3A%7B%7D%2C%22animBindings%22%3A%7B%7D%2C%22builder_id%22%3A%22fZFB5R_Mwwq95FB6xIVYu%22%7D
        filesHash:
          description: Hash of the asset files.
          type: string
          examples:
            - h1:qUqP5cyxm6YcTAhz05Hph5gvu9M=
        visibility:
          $ref: "#/components/schemas/Visibility"

    Course:
      description: Educational course with learning content.
      type: object
      properties:
        id:
          $ref: "#/components/schemas/Model/properties/id"
        createdAt:
          $ref: "#/components/schemas/Model/properties/createdAt"
        updatedAt:
          $ref: "#/components/schemas/Model/properties/updatedAt"
        owner:
          description: Username of the course's owner.
          $ref: "#/components/schemas/User/properties/username"
        title:
          description: Title of the course.
          type: string
          examples:
            - Introduction to XGo
        thumbnail:
          description: URL of the course's thumbnail image.
          type: string
          format: uri
          examples:
            - https://example.com/course-thumbnail.png
        entrypoint:
          description: Starting URL of the course.
          type: string
          format: uri
          examples:
            - https://example.com/course/intro
        references:
          description: References associated with the course.
          type: array
          items:
            $ref: "#/components/schemas/CourseReference"
        prompt:
          description: Prompt text for the course (used for copilot assistance).
          type: string
          examples:
            - Learn the basics of XGo programming language

    CourseReference:
      description: Reference to a resource associated with a course.
      type: object
      properties:
        type:
          description: Type of the reference.
          type: string
          enum:
            - project
          examples:
            - project
        fullName:
          description: Full name of the reference, in the format `owner/project`.
          type: string
          examples:
            - john/NiuXiaoQi

    CourseSeries:
      description: Collection of related courses.
      type: object
      properties:
        id:
          $ref: "#/components/schemas/Model/properties/id"
        createdAt:
          $ref: "#/components/schemas/Model/properties/createdAt"
        updatedAt:
          $ref: "#/components/schemas/Model/properties/updatedAt"
        owner:
          description: Username of the course series' owner.
          $ref: "#/components/schemas/User/properties/username"
        title:
          description: Title of the course series.
          type: string
          examples:
            - XGo Programming Series
        thumbnail:
          description: URL of the course series' thumbnail image.
          type: string
          format: uri
          examples:
            - https://example.com/course-thumbnail.png
        description:
          description: Description of the course series.
          type: string
          examples:
            - A series of courses on XBuilder programming.
        courseIDs:
          description: Array of course IDs included in this series.
          type: array
          items:
            type: string
          examples:
            - ["1", "2", "3"]
        order:
          description: Order/priority of the course series for sorting.
          type: integer
          format: int32
          examples:
            - 1

    CopilotMessage:
      description: Message in a copilot conversation.
      type: object
      properties:
        role:
          description: Role of the message.
          type: string
          enum:
            - user
            - copilot
          examples:
            - user
        content:
          type: object
          properties:
            type:
              description: Type of the message. For now, only `"text"` is supported.
              type: string
              enum:
                - text
              examples:
                - text
            text:
              description: Text content of the message.
              type: string
              examples:
                - Hello!

    CopilotTool:
      description: Tool available for copilot to use.
      type: object
      properties:
        type:
          description: Type of the tool.
          type: string
          enum:
            - function
          examples:
            - function
        function:
          type: object
          properties:
            name:
              description: Name of the function.
              type: string
              enum:
                - create_project
              examples:
                - create_project
            description:
              description: Description of the function.
              type: string
              examples:
                - create project
            parameters:
              description: Parameters of the function with JSON raw.
              type: object
              examples:
                - { "name": "NiuXiaoQi" }

    Workflow:
      description: Workflow configuration for copilot execution.
      type: object
      properties:
        env:
          description: Environment variables of the workflow.
          type: object
          examples:
            - { "reference_id": "275" }

    AIInteractionTurn:
      description: Single turn in an AI interaction session.
      type: object
      properties:
        requestContent:
          description: User's input text for the turn.
          type: string
          examples:
            - It's your turn.
        requestContext:
          description: Context for the user's input text for the turn.
          type: object
          additionalProperties: true
          examples:
            - position: [10, 20]
              health: 80
        responseText:
          description: AI's text output for the turn.
          type: string
          examples:
            - Okay, let me see...
        responseCommandName:
          description: Command requested by the AI in the response.
          type: string
          examples:
            - MakeMove
        responseCommandArgs:
          description: Arguments for the command requested by the AI.
          type: object
          additionalProperties: true
          examples:
            - Row: 1
              Col: 1
              Result: ""
        executedCommandResult:
          description: Result of executing the command requested in the response.
          type:
            - object
            - "null"
          properties:
            success:
              description: Indicates if the command execution was successful.
              type: boolean
              examples:
                - true
            errorMessage:
              description: Error details if execution failed.
              type: string
              examples:
                - Invalid move parameters
            isBreak:
              description: Indicates if the interaction should be terminated.
              type: boolean
              examples:
                - false
        isInitial:
          description: Indicates whether this turn is the initial turn of an interaction sequence.
          type: boolean
          examples:
            - true

    AIGCTask:
      description: AIGC task object.
      type: object
      properties:
        id:
          $ref: "#/components/schemas/Model/properties/id"
        createdAt:
          $ref: "#/components/schemas/Model/properties/createdAt"
        updatedAt:
          $ref: "#/components/schemas/Model/properties/updatedAt"
        type:
          description: Type of AIGC task.
          type: string
          enum:
            - removeBackground
            - generateCostume
            - generateAnimationVideo
            - extractVideoFrames
            - generateBackdrop
          examples:
            - generateCostume
        status:
          description: Current status of the AIGC task.
          type: string
          enum:
            - pending
            - processing
            - cancelling
            - completed
            - cancelled
            - failed
          examples:
            - processing
        progress:
          description: Progress percentage (0-100). Available when status is processing.
          type: integer
          minimum: 0
          maximum: 100
          examples:
            - 45
        message:
          description: Human-readable status message.
          type: string
          examples:
            - Generating image...
        result:
          description: Task result. Only available when status is completed.
          oneOf:
            - title: removeBackground
              type: object
              properties:
                imageUrl:
                  description: URL of the image with background removed.
                  type: string
                  format: uri
            - title: generateCostume
              type: object
              properties:
                imageUrl:
                  description: URL of the generated costume image.
                  type: string
                  format: uri
            - title: generateAnimationVideo
              type: object
              properties:
                videoUrl:
                  description: URL of the generated animation video.
                  type: string
                  format: uri
            - title: extractVideoFrames
              type: object
              properties:
                frameUrls:
                  description: URLs of the extracted frame images.
                  type: array
                  items:
                    type: string
                    format: uri
            - title: generateBackdrop
              type: object
              properties:
                imageUrl:
                  description: URL of the generated backdrop image.
                  type: string
                  format: uri
        error:
          description: Error details. Only available when status is failed.
          type: object
          properties:
            reason:
              description: Machine-readable error reason for programmatic handling.
              type: string
              enum:
                - invalidInput
                - contentPolicyViolation
                - generationFailed
                - timeout
                - serviceUnavailable
                - internalError
              examples:
                - contentPolicyViolation
            message:
              description: Human-readable error message.
              type: string
              examples:
                - Generation failed due to content policy violation

    AIGCArtStyle:
      description: Art style of projects or assets.
      type: string
      enum:
        - pixel-art
        - flat-design
        - hand-drawn
        - low-poly
        - unspecified
      examples:
        - pixel-art

    AIGCPerspective:
      description: Viewing perspectives for projects or assets.
      type: string
      enum:
        - true-top-down
        - angled-top-down
        - side-scrolling
        - unspecified
      examples:
        - side-scrolling

    AIGCProjectSettings:
      description: Settings of project for assets generation.
      type: object
      properties:
        name:
          description: Name of the project.
          type: string
          examples:
            - My First Project
        description:
          description: Description of the project.
          type: string
          examples:
            - A simple project.
        artStyle:
          $ref: "#/components/schemas/AIGCArtStyle"
        perspective:
          $ref: "#/components/schemas/AIGCPerspective"

    AIGCAssetBaseSettings:
      description: Base settings shared by all asset types.
      type: object
      properties:
        name:
          description: Name of the asset.
          type: string
          examples:
            - Fire Demon
        description:
          description: Description of the asset.
          type: string
          examples:
            - A fire demon character with glowing ember cracks

    AIGCGraphicAssetSettings:
      description: Settings for graphic assets, extending base settings with graphic properties.
      allOf:
        - $ref: "#/components/schemas/AIGCAssetBaseSettings"
        - type: object
          properties:
            artStyle:
              $ref: "#/components/schemas/AIGCArtStyle"
            perspective:
              $ref: "#/components/schemas/AIGCPerspective"

    AIGCSpriteSettings:
      description: Settings for generating a sprite asset.
      allOf:
        - $ref: "#/components/schemas/AIGCGraphicAssetSettings"
        - type: object
          properties:
            category:
              description: Sprite category.
              type: string
              enum:
                - character
                - item
                - prop
                - effect
                - ui
                - unspecified

    AIGCCostumeSettings:
      description: Settings for generating a costume asset.
      allOf:
        - $ref: "#/components/schemas/AIGCGraphicAssetSettings"
        - type: object
          properties:
            referenceImageUrl:
              description: URL of the reference image to guide the costume generation.
              type:
                - string
                - "null"
              format: uri
            facing:
              description: Direction the costume is facing.
              type: string
              enum:
                - front
                - back
                - left
                - right
                - unspecified

    AIGCAnimationSettings:
      description: Settings for generating an animation asset.
      allOf:
        - $ref: "#/components/schemas/AIGCGraphicAssetSettings"
        - type: object
          properties:
            referenceFrameUrl:
              description: URL of the reference frame image to guide the animation generation.
              type:
                - string
                - "null"
              format: uri
            loopMode:
              description: Whether the animation is loopable or non-loopable.
              type: string
              enum:
                - loopable
                - non-loopable

    AIGCBackdropSettings:
      description: Settings for generating a backdrop asset.
      allOf:
        - $ref: "#/components/schemas/AIGCGraphicAssetSettings"
        - type: object
          properties:
            category:
              description: Backdrop category.
              type: string
              enum:
                - ui
                - unspecified

    UpInfo:
      description: Upload credentials and configuration.
      type: object
      properties:
        token:
          description: Upload token used for authenticating upload requests.
          type: string
          examples:
            - MY_ACCESS_KEY:wQ4ofysef1R7IKnrziqtomqyDvI=:eyJzY29wZSI6Im15LWJ1Y2tldDpzdW5mbG93ZXIuanBnIiwiZGVhZGxpbmUiOjE0NTE0OTEyMDAsInJldHVybkJvZHkiOiJ7XCJuYW1lXCI6JChmbmFtZSksXCJzaXplXCI6JChmc2l6ZSksXCJ3XCI6JChpbWFnZUluZm8ud2lkdGgpLFwiaFwiOiQoaW1hZ2VJbmZvLmhlaWdodCksXCJoYXNoXCI6JChldGFnKX0ifQ==
        expires:
          description: Expiration time of the upload token in seconds.
          type: integer
          format: int64
          examples:
            - 1800
        maxSize:
          description: Maximum allowed file size in bytes.
          type: integer
          format: int64
          examples:
            - 26214400
        bucket:
          description: Name of the Qiniu Kodo bucket where files will be uploaded.
          type: string
          examples:
            - goplus-builder-usercontent-test
        region:
          description: Region of the Qiniu Kodo bucket.
          type: string
          examples:
            - na0

    ByPage:
      description: Paginated response wrapper.
      type: object
      properties:
        total:
          description: Total number of result items in the result set.
          type: integer
          format: int64
          minimum: 0
        data:
          description: Array of result items.
          type: array
          items:
            type: object

  parameters:
    SortOrder:
      name: sortOrder
      description: Order in which to sort the results.
      in: query
      schema:
        type: string
        enum:
          - asc
          - desc
        default: asc
        examples:
          - asc

    PageIndex:
      name: pageIndex
      description: Index of the page to retrieve.
      in: query
      schema:
        type: integer
        format: int32
        minimum: 1
        default: 1
        examples:
          - 1

    PageSize:
      name: pageSize
      description: Number of items per page.
      in: query
      schema:
        type: integer
        format: int32
        minimum: 1
        maximum: 100
        default: 20
        examples:
          - 20
