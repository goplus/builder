openapi: 3.1.0
info:
  title: XBuilder API
  version: 0.1.0
  description: |
    ## Overview

    **The API endpoints documented here are not yet stable and may change or break without notice. Use them at your own
    risk.**

security:
  - bearerAuth: []

paths:
  /users/list:
    get:
      tags:
        - Users
      summary: List users
      description: Retrieve a paginated list of users with optional filtering and ordering.
      security: []
      parameters:
        - name: follower
          in: query
          schema:
            $ref: "#/components/schemas/User/properties/username"
          description: Filter users who are being followed by the specified user.
        - name: followee
          in: query
          schema:
            $ref: "#/components/schemas/User/properties/username"
          description: Filter users who are following the specified user.
        - name: orderBy
          in: query
          schema:
            type: string
            enum:
              - createdAt
              - updatedAt
              - followedAt
            default: createdAt
            examples:
              - createdAt
          description: Field by which to order the results.
        - $ref: "#/components/parameters/SortOrder"
        - $ref: "#/components/parameters/PageIndex"
        - $ref: "#/components/parameters/PageSize"
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    $ref: "#/components/schemas/ByPage/properties/total"
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/User"
                    description: Array of user objects.

  /user/{username}:
    get:
      tags:
        - Users
      summary: Get a user
      description: Retrieve details of a specific user.
      security: []
      parameters:
        - name: username
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/User/properties/username"
          description: Username of the user to get.
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"

  /user:
    get:
      tags:
        - Users
      summary: Get the authenticated user
      description: Retrieve the profile information of the authenticated user.
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
    put:
      tags:
        - Users
      summary: Update the authenticated user
      description: Update the profile information of the authenticated user.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - description
              properties:
                description:
                  $ref: "#/components/schemas/User/properties/description"
      responses:
        "200":
          description: Successfully updated the authenticated user.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"

  /user/{username}/following:
    post:
      tags:
        - Users
      summary: Follow a user
      description: Follow the specified user as the authenticated user.
      parameters:
        - name: username
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/User/properties/username"
          description: Username of the user to follow.
      responses:
        "204":
          description: Successfully followed the user.
    get:
      tags:
        - Users
      summary: Check if a user is followed by the authenticated user
      description: Determine if the authenticated user is following the specified user.
      parameters:
        - name: username
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/User/properties/username"
          description: Username of the user to check.
      responses:
        "204":
          description: The user is followed by the authenticated user.
        "404":
          description: The user is not followed by the authenticated user.
    delete:
      tags:
        - Users
      summary: Unfollow a user
      description: Unfollow the specified user as the authenticated user.
      parameters:
        - name: username
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/User/properties/username"
          description: Username of the user to unfollow.
      responses:
        "204":
          description: Successfully unfollowed the user.

  /project:
    post:
      tags:
        - Projects
      summary: Create a project
      description: |
        Create a new project.

        If `remixSource` is provided, the new project will be a remix of an existing project.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - visibility
              properties:
                remixSource:
                  oneOf:
                    - $ref: "#/components/schemas/ProjectFullName"
                    - $ref: "#/components/schemas/ProjectReleaseFullName"
                  description: |
                    Full name of the project or project release to remix from.

                    **Using the project's full name means remixing the latest release sourced from that project.**
                name:
                  $ref: "#/components/schemas/Project/properties/name"
                files:
                  $ref: "#/components/schemas/Project/properties/files"
                  description: |
                    File paths and their corresponding universal URLs associated with the project.

                    **Required if `remixSource` is not provided.**
                visibility:
                  $ref: "#/components/schemas/Project/properties/visibility"
                description:
                  $ref: "#/components/schemas/Project/properties/description"
                instructions:
                  $ref: "#/components/schemas/Project/properties/instructions"
                thumbnail:
                  $ref: "#/components/schemas/Project/properties/thumbnail"
      responses:
        "201":
          description: Successfully created the project.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Project"

  /projects/list:
    get:
      tags:
        - Projects
      summary: List projects
      description: |
        Retrieve a paginated list of projects with optional filtering and ordering.

        #### Visibility rules

        | Authenticated (as alice) | Owner | Visibility | Access |
        |-------------|-------------|------------------|-----------|
        | false | * | | All users' public projects (force `visibility=public`) |
        | false | * | public | All users' public projects |
        | false | * | private | `401 Unauthorized` |
        | false | alice | | Alice's public projects (force `visibility=public`) |
        | false | alice | public | Alice's public projects |
        | false | alice | private | `401 Unauthorized` |
        | true | * | | All alice's projects + others' public projects |
        | true | * | public | All users' public projects |
        | true | * | private | Alice's private projects |
        | true | alice | | All alice's projects |
        | true | alice | public | Alice's public projects |
        | true | alice | private | Alice's private projects |
        | true | bob | | Bob's public projects (force `visibility=public`) |
        | true | bob | public | Bob's public projects |
        | true | bob | private | `401 Unauthorized` |
      security:
        - {}
        - bearerAuth: []
      parameters:
        - name: owner
          in: query
          schema:
            $ref: "#/components/schemas/Project/properties/owner"
          description: |
            Filter projects by the owner's username.

            Defaults to the authenticated user if not specified. Use `*` to include projects from all users.
        - name: remixedFrom
          in: query
          schema:
            oneOf:
              - $ref: "#/components/schemas/ProjectFullName"
              - $ref: "#/components/schemas/ProjectReleaseFullName"
          description: Filter remixed projects by the full name of the source project or project release.
        - name: keyword
          in: query
          schema:
            $ref: "#/components/schemas/Project/properties/name"
          description: Filter projects by name pattern.
        - name: visibility
          in: query
          schema:
            $ref: "#/components/schemas/Project/properties/visibility"
          description: Filter projects by visibility.
        - name: liker
          in: query
          schema:
            $ref: "#/components/schemas/User/properties/username"
          description: Filter projects liked by the specified user.
        - name: createdAfter
          in: query
          schema:
            type: string
            format: date-time
          description: Filter projects created after this timestamp.
        - name: likesReceivedAfter
          in: query
          schema:
            type: string
            format: date-time
          description: Filter projects that gained new likes after this timestamp.
        - name: remixesReceivedAfter
          in: query
          schema:
            type: string
            format: date-time
          description: Filter projects that were remixed after this timestamp.
        - name: fromFollowees
          in: query
          schema:
            type: boolean
            default: false
          description: When true, include projects created by the authenticated user's followees.
        - name: orderBy
          in: query
          schema:
            type: string
            enum:
              - createdAt
              - updatedAt
              - likeCount
              - remixCount
              - recentLikeCount
              - recentRemixCount
              - likedAt
            default: createdAt
            examples:
              - createdAt
          description: Field by which to order the results.
        - $ref: "#/components/parameters/SortOrder"
        - $ref: "#/components/parameters/PageIndex"
        - $ref: "#/components/parameters/PageSize"
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    $ref: "#/components/schemas/ByPage/properties/total"
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/Project"

  /project/{owner}/{name}:
    get:
      tags:
        - Projects
      summary: Get a project
      description: Retrieve details of a specific project.
      security:
        - {}
        - bearerAuth: []
      parameters:
        - name: owner
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/owner"
          description: Username of the project's owner.
        - name: name
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/name"
          description: Name of the project to get.
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Project"
    put:
      tags:
        - Projects
      summary: Update a project
      description: Update the details of a specific project.
      parameters:
        - name: owner
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/owner"
          description: Username of the project's owner.
        - name: name
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/name"
          description: Name of the project to update.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - files
                - visibility
              properties:
                files:
                  $ref: "#/components/schemas/Project/properties/files"
                visibility:
                  $ref: "#/components/schemas/Project/properties/visibility"
                description:
                  $ref: "#/components/schemas/Project/properties/description"
                instructions:
                  $ref: "#/components/schemas/Project/properties/instructions"
                thumbnail:
                  $ref: "#/components/schemas/Project/properties/thumbnail"
      responses:
        "200":
          description: Successfully updated the project.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Project"
    delete:
      tags:
        - Projects
      summary: Delete a project
      description: Permanently delete a specific project by its owner and name.
      parameters:
        - name: owner
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/owner"
          description: Username of the project's owner.
        - name: name
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/name"
          description: Name of the project to delete.
      responses:
        "204":
          description: Successfully deleted the project.

  /project/{owner}/{name}/view:
    post:
      tags:
        - Projects
      summary: Record a project view
      description: Record a view for the specified project as the authenticated user.
      parameters:
        - name: owner
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/owner"
          description: Username of the project's owner.
        - name: name
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/name"
          description: Name of the project to record a view for.
      responses:
        "204":
          description: Successfully recorded the project view.

  /project/{owner}/{name}/liking:
    post:
      tags:
        - Projects
      summary: Like a project
      description: Like the specified project as the authenticated user.
      parameters:
        - name: owner
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/owner"
          description: Username of the project's owner.
        - name: name
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/name"
          description: Name of the project to like.
      responses:
        "204":
          description: Successfully liked the project.
    get:
      tags:
        - Projects
      summary: Check if a project is liked by the authenticated user
      description: Determine if the authenticated user has liked the specified project.
      parameters:
        - name: owner
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/owner"
          description: Username of the project's owner.
        - name: name
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/name"
          description: Name of the project to check.
      responses:
        "204":
          description: The project is liked by the authenticated user.
        "404":
          description: The project is not liked by the authenticated user.
    delete:
      tags:
        - Projects
      summary: Unlike a project
      description: Unlike the specified project as the authenticated user.
      parameters:
        - name: owner
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/owner"
          description: Username of the project's owner.
        - name: name
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/name"
          description: Name of the project to unlike.
      responses:
        "204":
          description: Successfully unliked the project.

  /project-release:
    post:
      tags:
        - Project Releases
      summary: Create a project release
      description: Create a new release for a specific project.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - projectFullName
                - name
                - description
              properties:
                projectFullName:
                  $ref: "#/components/schemas/ProjectRelease/properties/projectFullName"
                name:
                  $ref: "#/components/schemas/ProjectRelease/properties/name"
                description:
                  $ref: "#/components/schemas/ProjectRelease/properties/description"
                thumbnail:
                  $ref: "#/components/schemas/ProjectRelease/properties/thumbnail"
      responses:
        "201":
          description: Successfully created the project release.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProjectRelease"

  /project-releases/list:
    get:
      tags:
        - Project Releases
      summary: List project releases
      description: Retrieve a paginated list of project releases with optional filtering and ordering.
      security: []
      parameters:
        - name: projectFullName
          in: query
          schema:
            $ref: "#/components/schemas/ProjectRelease/properties/projectFullName"
          description: Filter releases by the full name of the associated project.
        - name: orderBy
          in: query
          schema:
            type: string
            enum:
              - createdAt
              - updatedAt
              - remixCount
            default: createdAt
            examples:
              - createdAt
          description: Field by which to order the results.
        - $ref: "#/components/parameters/SortOrder"
        - $ref: "#/components/parameters/PageIndex"
        - $ref: "#/components/parameters/PageSize"
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    $ref: "#/components/schemas/ByPage/properties/total"
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/ProjectRelease"
                    description: Array of project release objects.

  /project-release/{owner}/{project}/{release}:
    get:
      tags:
        - Project Releases
      summary: Get a project release
      description: Retrieve details of a specific project release.
      security: []
      parameters:
        - name: owner
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/owner"
          description: Username of the project's owner.
        - name: project
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Project/properties/name"
          description: Name of the project.
        - name: release
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/ProjectRelease/properties/name"
          description: Name of the project release to get.
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProjectRelease"

  /asset:
    post:
      tags:
        - Assets
      summary: Create an asset
      description: |
        Create a new asset with the necessary details.

        #### Permission requirements

        - Only users with the `assetAdmin` role can create public assets.
        - Regular users can only create private assets.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - displayName
                - type
                - category
                - files
                - filesHash
                - visibility
              properties:
                displayName:
                  $ref: "#/components/schemas/Asset/properties/displayName"
                type:
                  $ref: "#/components/schemas/Asset/properties/type"
                category:
                  $ref: "#/components/schemas/Asset/properties/category"
                files:
                  $ref: "#/components/schemas/Asset/properties/files"
                filesHash:
                  $ref: "#/components/schemas/Asset/properties/filesHash"
                visibility:
                  $ref: "#/components/schemas/Asset/properties/visibility"
      responses:
        "201":
          description: Successfully created the asset.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Asset"
        "403":
          description: Insufficient permissions to perform this operation.

  /assets/list:
    get:
      tags:
        - Assets
      summary: List assets
      description: |
        Retrieve a paginated list of assets with optional filtering and ordering.

        #### Visibility rules

        | Authenticated (as alice) | Owner | Visibility | Access |
        |-------------|-------------|------------------|-----------|
        | false | * | | All users' public assets (force `visibility=public`) |
        | false | * | public | All users' public assets |
        | false | * | private | `401 Unauthorized` |
        | false | alice | | Alice's public assets (force `visibility=public`) |
        | false | alice | public | Alice's public assets |
        | false | alice | private | `401 Unauthorized` |
        | true | * | | All alice's assets + others' public assets |
        | true | * | public | All users' public assets |
        | true | * | private | Alice's private assets |
        | true | alice | | All alice's assets |
        | true | alice | public | Alice's public assets |
        | true | alice | private | Alice's private assets |
        | true | bob | | Bob's public assets (force `visibility=public`) |
        | true | bob | public | Bob's public assets |
        | true | bob | private | `401 Unauthorized` |
      security:
        - {}
        - bearerAuth: []
      parameters:
        - name: keyword
          in: query
          schema:
            $ref: "#/components/schemas/Asset/properties/displayName"
          description: Filter assets by display name pattern.
        - name: owner
          in: query
          schema:
            $ref: "#/components/schemas/User/properties/username"
          description: |
            Filter assets by owner's username.

            Defaults to the authenticated user if not specified. Use `*` to include assets from all users.
        - name: type
          in: query
          schema:
            $ref: "#/components/schemas/Asset/properties/type"
          description: Filter assets by type.
        - name: category
          in: query
          schema:
            $ref: "#/components/schemas/Asset/properties/category"
          description: Filter assets by category.
        - name: filesHash
          in: query
          schema:
            $ref: "#/components/schemas/Asset/properties/filesHash"
          description: Filter assets by files hash.
        - name: visibility
          in: query
          schema:
            $ref: "#/components/schemas/Asset/properties/visibility"
          description: Filter assets by visibility.
        - name: orderBy
          in: query
          schema:
            type: string
            enum:
              - createdAt
              - updatedAt
            examples:
              - createdAt
          description: Field by which to order the results.
        - $ref: "#/components/parameters/SortOrder"
        - $ref: "#/components/parameters/PageIndex"
        - $ref: "#/components/parameters/PageSize"
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    $ref: "#/components/schemas/ByPage/properties/total"
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/Asset"
                    description: Array of asset objects.

  /asset/{id}:
    get:
      tags:
        - Assets
      summary: Get an asset
      description: Retrieve details of a specific asset.
      security:
        - {}
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Model/properties/id"
          description: ID of the asset to get.
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Asset"
    put:
      tags:
        - Assets
      summary: Update an asset
      description: |
        Update the details of a specific asset.

        #### Permission requirements

        - Only users with the `assetAdmin` role can update assets to public visibility.
        - Asset owners can update their private assets.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Model/properties/id"
          description: ID of the asset to update.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - displayName
                - type
                - category
                - files
                - filesHash
                - visibility
              properties:
                displayName:
                  $ref: "#/components/schemas/Asset/properties/displayName"
                type:
                  $ref: "#/components/schemas/Asset/properties/type"
                category:
                  $ref: "#/components/schemas/Asset/properties/category"
                files:
                  $ref: "#/components/schemas/Asset/properties/files"
                filesHash:
                  $ref: "#/components/schemas/Asset/properties/filesHash"
                visibility:
                  $ref: "#/components/schemas/Asset/properties/visibility"
      responses:
        "200":
          description: Successfully updated the asset.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Asset"
        "403":
          description: Insufficient permissions to perform this operation.
    delete:
      tags:
        - Assets
      summary: Delete an asset
      description: Permanently delete a specific asset by its ID.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Model/properties/id"
          description: ID of the asset to delete.
      responses:
        "204":
          description: Successfully deleted the asset.

  /aigc/matting:
    post:
      tags:
        - AIGC
      summary: Remove image background
      description: Process the provided image URL to remove its background, resulting in a transparent background.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - imageUrl
              properties:
                imageUrl:
                  type: string
                  format: uri
                  description: URL of the image to process for background removal.
      responses:
        "200":
          description: Successfully processed the image for background removal.
          content:
            application/json:
              schema:
                type: object
                properties:
                  resultUrl:
                    type: string
                    format: uri
                    description: URL of the processed image with background removed.

  /copilot/message:
    post:
      tags:
        - Copilot
      summary: Generate a message
      description: |
        Generate a message by sending a list of input messages.

        #### Quota & rate limits

        - Each message consumes 1 quota from the authenticated user's allowance.
        - Per-user short-window rate limits also apply to prevent bursts. Hitting them returns 429 with `Retry-After`.
        - Long-window quota limits vary based on the authenticated user's plan.
        - When the long-window quota limit is reached, the 403 response includes a `Retry-After` header with the wait
          time in seconds.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - messages
              properties:
                messages:
                  type: array
                  description: Input messages.
                  items:
                    $ref: "#/components/schemas/CopilotMessage"
                  examples:
                    - - role: user
                        content:
                          type: text
                          text: Hello, world!
                tools:
                  type: array
                  description: Use Mcp tools.
                  items:
                    $ref: "#/components/schemas/CopilotTool"
                  examples:
                    - - type: function
                        function:
                          name: create_project
                          description: Create a new project.
                          parameters: { "name": "My Project" }

      responses:
        "201":
          description: Message successfully generated.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CopilotMessage"
                examples:
                  - role: copilot
                    content:
                      type: text
                      text: Hello!
        "403":
          description: Insufficient permissions or quota to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the long-window quota limit.
              schema:
                type: integer
        "429":
          description: Too many requests to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the short-window rate limit.
              schema:
                type: integer

  /copilot/stream/message:
    post:
      tags:
        - Copilot
      summary: Generate a stream message
      description: |
        Generate a stream message by sending a list of input messages.

        #### Quota & rate limits

        - Each message consumes 1 quota from the authenticated user's allowance.
        - Per-user short-window rate limits also apply to prevent bursts. Hitting them returns 429 with `Retry-After`.
        - Long-window quota limits vary based on the authenticated user's plan.
        - When the long-window quota limit is reached, the 403 response includes a `Retry-After` header with the wait
          time in seconds.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - messages
              properties:
                messages:
                  type: array
                  description: Input messages.
                  items:
                    $ref: "#/components/schemas/CopilotMessage"
                  examples:
                    - - role: user
                        content:
                          type: text
                          text: Hello, world!
                tools:
                  type: array
                  description: Use Mcp tools.
                  items:
                    $ref: "#/components/schemas/CopilotTool"
                  examples:
                    - - type: function
                        function:
                          name: create_project
                          description: Create a new project.
                          parameters: { "name": "My Project" }
      responses:
        "201":
          description: Stream Message successfully generated.
          content:
            application/stream:
        "403":
          description: Insufficient permissions or quota to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the long-window quota limit.
              schema:
                type: integer
        "429":
          description: Too many requests to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the short-window rate limit.
              schema:
                type: integer

  /workflow/stream/message:
    post:
      tags:
        - Workflow
      summary: Generate a stream message from workflow
      description: |
        Generate a stream message by sending a list of input messages.

        #### Quota & rate limits

        - Each workflow execution may consume multiple quotas from the authenticated user's allowance.
        - Per-user short-window rate limits also apply to prevent bursts. Hitting them returns 429 with `Retry-After`.
        - Long-window quota limits vary based on the authenticated user's plan.
        - When the long-window quota limit is reached, the 403 response includes a `Retry-After` header with the wait
          time in seconds.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - messages
              properties:
                messages:
                  type: array
                  description: Input messages.
                  items:
                    $ref: "#/components/schemas/CopilotMessage"
                  examples:
                    - - role: user
                        content:
                          type: text
                          text: Hello, world!
                tools:
                  type: array
                  description: Use Mcp tools.
                  items:
                    $ref: "#/components/schemas/CopilotTool"
                  examples:
                    - - type: function
                        function:
                          name: create_project
                          description: Create a new project.
                          parameters: { "name": "My Project" }
                workflow:
                  $ref: "#/components/schemas/Workflow"
                  description: env of the workflow.
      responses:
        "201":
          description: Stream Message successfully generated.
          content:
            application/stream:
        "403":
          description: Insufficient permissions or quota to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the long-window quota limit.
              schema:
                type: integer
        "429":
          description: Too many requests to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the short-window rate limit.
              schema:
                type: integer

  /ai/description:
    post:
      tags:
        - AI
      summary: Generate AI description
      description: |
        Generate an AI-powered descriptive summary of a game from the player's perspective based on provided game
        content (such as spx source code and project structure).

        #### Quota & rate limits

        - Each request consumes 1 quota from the authenticated user's AI description allowance.
        - Per-user short-window rate limits also apply to prevent bursts. Hitting them returns 429 with `Retry-After`.
        - Quota limits vary based on the authenticated user's plan.
        - When the long-window quota limit is reached, the 403 response includes a `Retry-After` header with the wait
          time in seconds.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AIDescriptionRequest"
      responses:
        "200":
          description: Successfully generated AI description.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AIDescriptionResponse"
        "403":
          description: Insufficient permissions or quota to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the long-window quota limit.
              schema:
                type: integer
        "429":
          description: Too many requests to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the short-window rate limit.
              schema:
                type: integer

  /ai/interaction/turn:
    post:
      tags:
        - AI
      summary: Perform an AI interaction turn
      description: |
        Send a message and context to the AI, receive a response including text and an optional command.

        #### Quota & rate limits

        - Each turn consumes 1 quota from the authenticated user's AI interaction turn allowance.
        - Per-user short-window rate limits also apply to prevent bursts. Hitting them returns 429 with `Retry-After`.
        - Long-window quota limits vary based on the authenticated user's plan.
        - When the long-window quota limit is reached, the 403 response includes a `Retry-After` header with the wait
          time in seconds.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AIInteractionRequest"
      responses:
        "200":
          description: Successful AI interaction.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AIInteractionResponse"
        "403":
          description: Insufficient permissions or quota to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the long-window quota limit.
              schema:
                type: integer
        "429":
          description: Too many requests to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the short-window rate limit.
              schema:
                type: integer

  /ai/interaction/archive:
    post:
      tags:
        - AI
      summary: Archive AI interaction history
      description: |
        Archive a batch of interaction turns into a condensed summary for future context.

        #### Quota & rate limits

        - Each archive request consumes 1 quota from the authenticated user's AI interaction archive allowance.
        - Per-user short-window rate limits also apply to prevent bursts. Hitting them returns 429 with `Retry-After`.
        - Long-window quota limits vary based on the authenticated user's plan.
        - When the long-window quota limit is reached, the 403 response includes a `Retry-After` header with the wait
          time in seconds.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AIInteractionArchiveRequest"
      responses:
        "200":
          description: Successfully archived interaction history.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AIInteractionArchiveResponse"
        "403":
          description: Insufficient permissions or quota to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the long-window quota limit.
              schema:
                type: integer
        "429":
          description: Too many requests to perform this operation.
          headers:
            Retry-After:
              description: Seconds to wait before retrying after hitting the short-window rate limit.
              schema:
                type: integer

  /course:
    post:
      tags:
        - Courses
      summary: Create a course
      description: |
        Create a new course with the necessary details.

        #### Permission requirements

        - Only users with the `courseAdmin` role can create courses.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - thumbnail
                - entrypoint
                - references
                - prompt
              properties:
                title:
                  $ref: "#/components/schemas/Course/properties/title"
                thumbnail:
                  $ref: "#/components/schemas/Course/properties/thumbnail"
                entrypoint:
                  $ref: "#/components/schemas/Course/properties/entrypoint"
                references:
                  $ref: "#/components/schemas/Course/properties/references"
                prompt:
                  $ref: "#/components/schemas/Course/properties/prompt"
      responses:
        "201":
          description: Successfully created the course.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Course"
        "403":
          description: Insufficient permissions to perform this operation.

  /courses/list:
    get:
      tags:
        - Courses
      summary: List courses
      description: Retrieve a paginated list of courses with optional filtering and ordering.
      security:
        - {}
        - bearerAuth: []
      parameters:
        - name: courseSeriesID
          in: query
          schema:
            type: string
          description: Filter courses by the course series ID.
        - name: owner
          in: query
          schema:
            $ref: "#/components/schemas/User/properties/username"
          description: |
            Filter courses by the owner's username.

            Defaults to the authenticated user if not specified. Use `*` to include courses from all users.
        - name: orderBy
          in: query
          schema:
            type: string
            enum:
              - createdAt
              - updatedAt
              - sequenceInCourseSeries
            default: createdAt
            examples:
              - createdAt
          description: Field by which to order the results.
        - $ref: "#/components/parameters/SortOrder"
        - $ref: "#/components/parameters/PageIndex"
        - $ref: "#/components/parameters/PageSize"
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    $ref: "#/components/schemas/ByPage/properties/total"
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/Course"
                    description: Array of course objects.

  /course/{id}:
    get:
      tags:
        - Courses
      summary: Get a course
      description: Retrieve details of a specific course.
      security:
        - {}
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Model/properties/id"
          description: ID of the course to get.
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Course"
    put:
      tags:
        - Courses
      summary: Update a course
      description: |
        Update the details of a specific course.

        #### Permission requirements

        - Only users with the `courseAdmin` role can update courses.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Model/properties/id"
          description: ID of the course to update.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - thumbnail
                - entrypoint
                - references
                - prompt
              properties:
                title:
                  $ref: "#/components/schemas/Course/properties/title"
                thumbnail:
                  $ref: "#/components/schemas/Course/properties/thumbnail"
                entrypoint:
                  $ref: "#/components/schemas/Course/properties/entrypoint"
                references:
                  $ref: "#/components/schemas/Course/properties/references"
                prompt:
                  $ref: "#/components/schemas/Course/properties/prompt"
      responses:
        "200":
          description: Successfully updated the course.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Course"
        "403":
          description: Insufficient permissions to perform this operation.
    delete:
      tags:
        - Courses
      summary: Delete a course
      description: |
        Permanently delete a specific course by its ID.

        #### Permission requirements

        - Only users with the `courseAdmin` role can delete courses.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Model/properties/id"
          description: ID of the course to delete.
      responses:
        "204":
          description: Successfully deleted the course.
        "403":
          description: Insufficient permissions to perform this operation.

  /course-series:
    post:
      tags:
        - Course Series
      summary: Create a course series
      description: |
        Create a new course series with the necessary details.

        #### Permission requirements

        - Only users with the `courseAdmin` role can create course series.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - courseIDs
                - order
              properties:
                title:
                  $ref: "#/components/schemas/CourseSeries/properties/title"
                thumbnail:
                  $ref: "#/components/schemas/CourseSeries/properties/thumbnail"
                description:
                  $ref: "#/components/schemas/CourseSeries/properties/description"
                courseIDs:
                  $ref: "#/components/schemas/CourseSeries/properties/courseIDs"
                order:
                  $ref: "#/components/schemas/CourseSeries/properties/order"
      responses:
        "201":
          description: Successfully created the course series.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CourseSeries"
        "403":
          description: Insufficient permissions to perform this operation.

  /course-serieses/list:
    get:
      tags:
        - Course Series
      summary: List course series
      description: Retrieve a paginated list of course series with optional filtering and ordering.
      security:
        - {}
        - bearerAuth: []
      parameters:
        - name: orderBy
          in: query
          schema:
            type: string
            enum:
              - createdAt
              - updatedAt
              - order
            default: order
            examples:
              - order
          description: Field by which to order the results.
        - name: owner
          in: query
          schema:
            $ref: "#/components/schemas/User/properties/username"
          description: |
            Filter course serieses by the owner's username.

            Defaults to the authenticated user if not specified. Use `*` to include course series from all users.
        - $ref: "#/components/parameters/SortOrder"
        - $ref: "#/components/parameters/PageIndex"
        - $ref: "#/components/parameters/PageSize"
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    $ref: "#/components/schemas/ByPage/properties/total"
                  data:
                    type: array
                    items:
                      $ref: "#/components/schemas/CourseSeries"
                    description: Array of course series objects.

  /course-series/{id}:
    get:
      tags:
        - Course Series
      summary: Get a course series
      description: Retrieve details of a specific course series.
      security:
        - {}
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Model/properties/id"
          description: ID of the course series to get.
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CourseSeries"
    put:
      tags:
        - Course Series
      summary: Update a course series
      description: |
        Update the details of a specific course series.

        #### Permission requirements

        - Only users with the `courseAdmin` role can update course series.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Model/properties/id"
          description: ID of the course series to update.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - courseIDs
                - order
              properties:
                title:
                  $ref: "#/components/schemas/CourseSeries/properties/title"
                thumbnail:
                  $ref: "#/components/schemas/CourseSeries/properties/thumbnail"
                description:
                  $ref: "#/components/schemas/CourseSeries/properties/description"
                courseIDs:
                  $ref: "#/components/schemas/CourseSeries/properties/courseIDs"
                order:
                  $ref: "#/components/schemas/CourseSeries/properties/order"
      responses:
        "200":
          description: Successfully updated the course series.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CourseSeries"
        "403":
          description: Insufficient permissions to perform this operation.
    delete:
      tags:
        - Course Series
      summary: Delete a course series
      description: |
        Permanently delete a specific course series by its ID.

        #### Permission requirements

        - Only users with the `courseAdmin` role can delete course series.
      parameters:
        - name: id
          in: path
          required: true
          schema:
            $ref: "#/components/schemas/Model/properties/id"
          description: ID of the course series to delete.
      responses:
        "204":
          description: Successfully deleted the course series.
        "403":
          description: Insufficient permissions to perform this operation.

  /util/upinfo:
    get:
      tags:
        - Utils
      summary: Get upload information
      description: Retrieve necessary information and tokens required for file uploads.
      responses:
        "200":
          description: Successful response.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UpInfo"

  /util/fileurls:
    post:
      tags:
        - Utils
      summary: Generate signed URLs for files
      description: Create signed web URLs for the specified files to allow secure access.
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                objects:
                  type: array
                  items:
                    type: string
                  examples:
                    - - kodo://goplus-builder-usercontent-test/files/FjgMMuSaAsRWx1t7UAQnQ5r4YsAe-195
                  description: List of universal URLs of the objects.
      responses:
        "201":
          description: Successfully generated signed URLs for the files.
          content:
            application/json:
              schema:
                type: object
                properties:
                  objectUrls:
                    type: array
                    items:
                      type: object
                    examples:
                      - - kodo://goplus-builder-usercontent-test/files/FjgMMuSaAsRWx1t7UAQnQ5r4YsAe-195: https://builder-usercontent.gopluscdn.com/files/FjgMMuSaAsRWx1t7UAQnQ5r4YsAe-195?e=1727658000&token=t_6AOOkCdDu4m7fPleblcK0gMBZfbGQzeEIVt5Au:EMJdLqcCWrqQ5pRd01diOv7nhQw=
                    description: Map from universal URLs to signed web URLs for the objects.

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: Access token, in the format `Bearer {token}`.

  schemas:
    Model:
      type: object
      properties:
        id:
          type: string
          format: int64
          examples:
            - 1
          description: Unique identifier.
        createdAt:
          type: string
          format: date-time
          examples:
            - 2006-01-02T15:04:05Z07:00
          description: Creation timestamp.
        updatedAt:
          type: string
          format: date-time
          examples:
            - 2006-01-02T15:04:05Z07:00
          description: Last update timestamp.

    Visibility:
      type: string
      enum:
        - private
        - public
      examples:
        - private
      description: Visibility of the object.

    User:
      type: object
      properties:
        id:
          $ref: "#/components/schemas/Model/properties/id"
        createdAt:
          $ref: "#/components/schemas/Model/properties/createdAt"
        updatedAt:
          $ref: "#/components/schemas/Model/properties/updatedAt"
        username:
          type: string
          examples:
            - john
          description: Unique username of the user.
        displayName:
          type: string
          examples:
            - John Doe
          description: Display name of the user.
        avatar:
          type: string
          format: uri
          examples:
            - https://avatars.githubusercontent.com/u/10137?v=4
          description: URL of the user's avatar image.
        description:
          type: string
          examples:
            - Two giants live in Britain's land...
          description: Brief bio or description of the user.
        plan:
          type: string
          enum:
            - free
            - plus
          examples:
            - free
          description: Subscription plan of the user.
        followerCount:
          type: integer
          format: int64
          minimum: 0
          examples:
            - 1
          description: Number of followers the user has.
        followingCount:
          type: integer
          format: int64
          minimum: 0
          examples:
            - 1
          description: Number of users the user is following.
        projectCount:
          type: integer
          format: int64
          minimum: 0
          examples:
            - 1
          description: Total number of projects created by the user.
        publicProjectCount:
          type: integer
          format: int64
          minimum: 0
          examples:
            - 1
          description: Number of public projects created by the user.
        likedProjectCount:
          type: integer
          format: int64
          minimum: 0
          examples:
            - 1
          description: Number of projects liked by the user.
        capabilities:
          $ref: "#/components/schemas/UserCapabilities"
          nullable: true
          description: |
            Capabilities of the user.

            **This field is only present for the authenticated user's own profile.**

    UserCapabilities:
      type: object
      properties:
        canManageAssets:
          type: boolean
          description: Whether user can manage asset library.
          examples:
            - true
        canManageCourses:
          type: boolean
          description: Whether user can manage courses and course series.
          examples:
            - true
        canUsePremiumLLM:
          type: boolean
          description: Whether user can access premium LLM models.
          examples:
            - true

    Project:
      type: object
      properties:
        id:
          $ref: "#/components/schemas/Model/properties/id"
        createdAt:
          $ref: "#/components/schemas/Model/properties/createdAt"
        updatedAt:
          $ref: "#/components/schemas/Model/properties/updatedAt"
        owner:
          $ref: "#/components/schemas/User/properties/username"
        remixedFrom:
          $ref: "#/components/schemas/ProjectReleaseFullName"
          nullable: true
          description: Full name of the project release from which the project is remixed.
        latestRelease:
          $ref: "#/components/schemas/ProjectRelease"
          nullable: true
          description: Latest release of the project.
        name:
          type: string
          examples:
            - NiuXiaoQi
          description: Unique name of the project.
        version:
          type: integer
          format: int32
          examples:
            - 1
          description: Version number of the project.
        files:
          type: object
          examples:
            - NiuXiaoQi.spx: data:;,
              assets/backdrop.jpeg: kodo://goplus-builder-usercontent-test/files/FnPtX9heX2eXE8vRIiITmFXQVAOz-5352
              assets/index.json: data:application/json,%7B%22backdrops%22%3A%5B%7B%22x%22%3A0%2C%22y%22%3A0%2C%22faceRight%22%3A0%2C%22bitmapResolution%22%3A2%2C%22name%22%3A%22backdrop%22%2C%22path%22%3A%22backdrop.png%22%2C%22builder_id%22%3A%22LGH5r3l8lDocud3zzlq3D%22%7D%5D%2C%22backdropIndex%22%3A0%2C%22map%22%3A%7B%22width%22%3A480%2C%22height%22%3A360%2C%22mode%22%3A%22fillRatio%22%7D%2C%22run%22%3A%7B%22width%22%3A480%2C%22height%22%3A360%7D%2C%22zorder%22%3A%5B%22NiuXiaoQi%22%5D%2C%22builder_spriteOrder%22%3A%5B%22fZFB5R_Mwwq95FB6xIVYu%22%5D%2C%22builder_soundOrder%22%3A%5B%5D%7D
              assets/sprites/NiuXiaoQi/costume.png: kodo://goplus-builder-usercontent-test/files/FoSC8ngQn_jzAIPBqCp9VZLBVkSq-52661
              assets/sprites/NiuXiaoQi/index.json: data:application/json,%7B%22heading%22%3A90%2C%22x%22%3A0%2C%22y%22%3A0%2C%22size%22%3A1%2C%22rotationStyle%22%3A%22normal%22%2C%22costumeIndex%22%3A0%2C%22visible%22%3Atrue%2C%22isDraggable%22%3Afalse%2C%22pivot%22%3A%7B%22x%22%3A71%2C%22y%22%3A-75%7D%2C%22costumes%22%3A%5B%7B%22x%22%3A0%2C%22y%22%3A0%2C%22faceRight%22%3A0%2C%22bitmapResolution%22%3A2%2C%22name%22%3A%22costume%22%2C%22path%22%3A%22costume.png%22%2C%22builder_id%22%3A%22VCxSMAnlb3WI1IyikqjCV%22%7D%5D%2C%22fAnimations%22%3A%7B%7D%2C%22animBindings%22%3A%7B%7D%2C%22builder_id%22%3A%22fZFB5R_Mwwq95FB6xIVYu%22%7D
              main.spx: data:;,
          description: File paths and their corresponding universal URLs associated with the project.
        visibility:
          $ref: "#/components/schemas/Visibility"
        description:
          type: string
          examples:
            - NiuXiaoQi in your area.
          description: Brief description of the project.
        instructions:
          type: string
          examples:
            - Just run it.
          description: Instructions on how to interact with the project.
        thumbnail:
          type: string
          format: uri
          examples:
            - https://example.com/project-thumbnail.png
          description: URL of the project's thumbnail image.
        viewCount:
          type: integer
          format: int64
          minimum: 0
          examples:
            - 1
          description: Number of times the project has been viewed.
        likeCount:
          type: integer
          format: int64
          minimum: 0
          examples:
            - 1
          description: Number of likes the project has received.
        releaseCount:
          type: integer
          format: int64
          minimum: 0
          examples:
            - 1
          description: Number of releases associated with the project.
        remixCount:
          type: integer
          format: int64
          minimum: 0
          examples:
            - 1
          description: Number of times the project has been remixed.

    ProjectFullName:
      type: string
      examples:
        - john/NiuXiaoQi
      description: Full name of the project, in the format `owner/project`.

    ProjectRelease:
      type: object
      properties:
        id:
          $ref: "#/components/schemas/Model/properties/id"
        createdAt:
          $ref: "#/components/schemas/Model/properties/createdAt"
        updatedAt:
          $ref: "#/components/schemas/Model/properties/updatedAt"
        projectFullName:
          $ref: "#/components/schemas/ProjectFullName"
          description: Full name of the project that the release is associated with, in the format `owner/project`.
        name:
          type: string
          pattern: '^v(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$'
          examples:
            - v1.2.3
          description: Unique name of the project release, adhering to [Semantic Versioning 2.0.0](https://semver.org/spec/v2.0.0.html).
        description:
          type: string
          examples:
            - First release.
          description: Brief description of the release.
        files:
          $ref: "#/components/schemas/Project/properties/files"
          description: File paths and their corresponding universal URLs associated with the release.
        thumbnail:
          $ref: "#/components/schemas/Project/properties/thumbnail"
          description: URL of the release's thumbnail image.
        remixCount:
          $ref: "#/components/schemas/Project/properties/remixCount"
          description: Number of times the release has been remixed.

    ProjectReleaseFullName:
      type: string
      examples:
        - john/NiuXiaoQi/v1.2.3
      description: Full name of the project release, in the format `owner/project/release`.

    Asset:
      type: object
      properties:
        id:
          $ref: "#/components/schemas/Model/properties/id"
        createdAt:
          $ref: "#/components/schemas/Model/properties/createdAt"
        updatedAt:
          $ref: "#/components/schemas/Model/properties/updatedAt"
        owner:
          $ref: "#/components/schemas/User/properties/username"
          description: Username of the asset's owner.
        displayName:
          type: string
          examples:
            - NiuXiaoQi
          description: Display name of the asset.
        type:
          type: string
          enum:
            - sprite
            - backdrop
            - sound
          examples:
            - sprite
          description: Type of the asset.
        category:
          type: string
          examples:
            - People
          description: Category to which the asset belongs.
        files:
          type: object
          examples:
            - assets/sprites/NiuXiaoQi/costume.png: kodo://goplus-builder-usercontent-test/files/FoSC8ngQn_jzAIPBqCp9VZLBVkSq-52661
              assets/sprites/NiuXiaoQi/index.json: data:application/json,%7B%22heading%22%3A90%2C%22x%22%3A0%2C%22y%22%3A0%2C%22size%22%3A1%2C%22rotationStyle%22%3A%22normal%22%2C%22costumeIndex%22%3A0%2C%22visible%22%3Atrue%2C%22isDraggable%22%3Afalse%2C%22pivot%22%3A%7B%22x%22%3A71%2C%22y%22%3A-75%7D%2C%22costumes%22%3A%5B%7B%22x%22%3A0%2C%22y%22%3A0%2C%22faceRight%22%3A0%2C%22bitmapResolution%22%3A2%2C%22name%22%3A%22costume%22%2C%22path%22%3A%22costume.png%22%2C%22builder_id%22%3A%22VCxSMAnlb3WI1IyikqjCV%22%7D%5D%2C%22fAnimations%22%3A%7B%7D%2C%22animBindings%22%3A%7B%7D%2C%22builder_id%22%3A%22fZFB5R_Mwwq95FB6xIVYu%22%7D
          description: File paths and their corresponding universal URLs associated with the asset.
        filesHash:
          type: string
          examples:
            - h1:qUqP5cyxm6YcTAhz05Hph5gvu9M=
          description: Hash of the asset files.
        visibility:
          $ref: "#/components/schemas/Visibility"

    Course:
      type: object
      properties:
        id:
          $ref: "#/components/schemas/Model/properties/id"
        createdAt:
          $ref: "#/components/schemas/Model/properties/createdAt"
        updatedAt:
          $ref: "#/components/schemas/Model/properties/updatedAt"
        owner:
          $ref: "#/components/schemas/User/properties/username"
          description: Username of the course's owner.
        title:
          type: string
          examples:
            - Introduction to XGo
          description: Title of the course.
        thumbnail:
          type: string
          format: uri
          examples:
            - https://example.com/course-thumbnail.png
          description: URL of the course's thumbnail image.
        entrypoint:
          type: string
          format: uri
          examples:
            - https://example.com/course/intro
          description: Starting URL of the course.
        references:
          type: array
          items:
            $ref: "#/components/schemas/CourseReference"
          description: References associated with the course.
        prompt:
          type: string
          examples:
            - Learn the basics of XGo programming language
          description: Prompt text for the course (used for copilot assistance).

    CourseReference:
      type: object
      properties:
        type:
          type: string
          enum:
            - project
          examples:
            - project
          description: Type of the reference.
        fullName:
          type: string
          examples:
            - john/NiuXiaoQi
          description: Full name of the reference, in the format `owner/project`.

    CourseSeries:
      type: object
      properties:
        id:
          $ref: "#/components/schemas/Model/properties/id"
        createdAt:
          $ref: "#/components/schemas/Model/properties/createdAt"
        updatedAt:
          $ref: "#/components/schemas/Model/properties/updatedAt"
        owner:
          $ref: "#/components/schemas/User/properties/username"
          description: Username of the course's owner.
        title:
          type: string
          examples:
            - XGo Programming Series
          description: Title of the course series.
        thumbnail:
          type: string
          format: uri
          examples:
            - https://example.com/course-thumbnail.png
          description: URL of the course series's thumbnail image.
        description:
          type: string
          examples:
            - A series of courses on XBuilder programming.
          description: Description of the course series.
        courseIDs:
          type: array
          items:
            type: string
          examples:
            - ["1", "2", "3"]
          description: Array of course IDs included in this series.
        order:
          type: integer
          format: int32
          examples:
            - 1
          description: Order/priority of the course series for sorting.

    AIDescriptionRequest:
      type: object
      required:
        - content
      properties:
        content:
          type: string
          description: The game content to generate a description for (e.g., spx source code, project structure).
          examples:
            - |
              Game: TicTacToe
              Description: A classic Tic-Tac-Toe game.

              === File: main.spx ===
              var (
                  // board is the main Tic-Tac-Toe board, where 1 represents "X" and 2 represents "O".
                  board [3][3]int
              )

              // onStart handles the game start event.
              onStart => {
                // ...
              }

    AIDescriptionResponse:
      type: object
      properties:
        description:
          type: string
          description: AI-generated descriptive summary of the game world from the player's perspective.
          examples:
            - |
              This is a Tic-Tac-Toe game played on a 3x3 grid. The player uses `X` marks while the AI opponent uses `O`
              marks. Players take turns placing their marks in empty squares, with the goal of getting three marks in a
              row horizontally, vertically, or diagonally. The game supports mouse click interaction. Click on an empty
              square to place your mark. The game ends when either player achieves three in a row or the board is
              completely filled.

    AIInteractionRequest:
      type: object
      properties:
        content:
          type: string
          description: The core user input message.
          examples:
            - What should I do next?
        context:
          type: object
          additionalProperties: true
          description: Specific context for the current user input.
          examples:
            - position: [10, 20]
              health: 80
        role:
          type: string
          description: Persona the AI should adopt.
          examples:
            - Guide
        roleContext:
          type: object
          additionalProperties: true
          description: Additional context specific to the role.
          examples:
            - style: friendly
              knowledgeScope: game rules
        knowledgeBase:
          type: object
          additionalProperties: true
          description: Background knowledge provided to the AI.
          examples:
            - worldName: TestWorld
              gravity: 9.8
        commandSpecs:
          type: array
          items:
            $ref: "#/components/schemas/AIInteractionCommandSpec"
          description: Commands the AI is allowed to call.
        history:
          type: array
          items:
            $ref: "#/components/schemas/AIInteractionTurn"
          description: Record of previous interactions in this session.
        archivedHistory:
          type: string
          description: Content of archived historical interactions.
          examples:
            - "Previous conversation summary..."
        continuationTurn:
          type: integer
          format: int32
          minimum: 0
          default: 0
          description: |
            Current turn number in a multi-turn interaction sequence.

            A value of 0 means this is the initial turn from user input. Values > 0 indicate continuation turns where
            the AI continues the current interaction sequence based on the outcomes of commands executed within this
            sequence.
          examples:
            - 0

    AIInteractionResponse:
      type: object
      properties:
        text:
          type: string
          description: Textual part of the AI's response.
          examples:
            - Okay, I suggest moving to (1, 1).
        commandName:
          type: string
          description: Name of the command the AI wants to execute.
          examples:
            - MakeMove
        commandArgs:
          type: object
          additionalProperties: true
          description: Arguments for the command to be executed.
          examples:
            - Row: 1
              Col: 1
              Result: ""

    AIInteractionTurn:
      type: object
      properties:
        requestContent:
          type: string
          description: User's input text for the turn.
          examples:
            - It's your turn.
        requestContext:
          type: object
          additionalProperties: true
          description: Context for the user's input text for the turn.
          examples:
            - position: [10, 20]
              health: 80
        responseText:
          type: string
          description: AI's text output for the turn.
          examples:
            - Okay, let me see...
        responseCommandName:
          type: string
          description: Command requested by the AI in the response.
          examples:
            - MakeMove
        responseCommandArgs:
          type: object
          additionalProperties: true
          description: Arguments for the command requested by the AI.
          examples:
            - Row: 1
              Col: 1
              Result: ""
        executedCommandResult:
          $ref: "#/components/schemas/AIInteractionCommandResult"
          nullable: true
          description: Result of executing the command requested in the response.
        isInitial:
          type: boolean
          description: Indicates whether this turn is the initial turn of an interaction sequence.
          examples:
            - true

    AIInteractionCommandSpec:
      type: object
      properties:
        name:
          type: string
          description: Unique identifier for the command.
          examples:
            - Move
        description:
          type: string
          description: Explanation of what the command does.
          examples:
            - Move the character
        parameters:
          type: array
          items:
            $ref: "#/components/schemas/AIInteractionCommandParamSpec"
          description: Parameters the command accepts.

    AIInteractionCommandParamSpec:
      type: object
      properties:
        name:
          type: string
          description: Parameter name.
          examples:
            - Direction
        type:
          type: string
          description: Go type name of the parameter.
          examples:
            - string
        description:
          type: string
          description: Purpose of the parameter.
          examples:
            - "Direction to move: up, down, left, right"

    AIInteractionCommandResult:
      type: object
      properties:
        success:
          type: boolean
          description: Indicates if the command execution was successful.
          examples:
            - true
        errorMessage:
          type: string
          description: Error details if execution failed.
          examples:
            - Invalid move parameters
        isBreak:
          type: boolean
          description: Indicates if the interaction should be terminated.
          examples:
            - false

    AIInteractionArchiveRequest:
      type: object
      required:
        - turns
      properties:
        turns:
          type: array
          items:
            $ref: "#/components/schemas/AIInteractionTurn"
          description: Interaction turns to be archived.
        existingArchive:
          type: string
          nullable: true
          description: Existing archived content to be merged with new turns.
          examples:
            - "Previous conversation summary..."

    AIInteractionArchiveResponse:
      type: object
      properties:
        content:
          type: string
          description: The consolidated archive content.
          examples:
            - "Complete conversation summary including new turns..."

    UpInfo:
      type: object
      properties:
        token:
          type: string
          examples:
            - MY_ACCESS_KEY:wQ4ofysef1R7IKnrziqtomqyDvI=:eyJzY29wZSI6Im15LWJ1Y2tldDpzdW5mbG93ZXIuanBnIiwiZGVhZGxpbmUiOjE0NTE0OTEyMDAsInJldHVybkJvZHkiOiJ7XCJuYW1lXCI6JChmbmFtZSksXCJzaXplXCI6JChmc2l6ZSksXCJ3XCI6JChpbWFnZUluZm8ud2lkdGgpLFwiaFwiOiQoaW1hZ2VJbmZvLmhlaWdodCksXCJoYXNoXCI6JChldGFnKX0ifQ==
          description: Upload token used for authenticating upload requests.
        expires:
          type: integer
          format: int64
          examples:
            - 1800
          description: Expiration time of the upload token in seconds.
        maxSize:
          type: integer
          format: int64
          examples:
            - 26214400
          description: Maximum allowed file size in bytes.
        bucket:
          type: string
          examples:
            - goplus-builder-usercontent-test
          description: Name of the Qiniu Kodo bucket where files will be uploaded.
        region:
          type: string
          examples:
            - na0
          description: Region of the Qiniu Kodo bucket.

    ByPage:
      type: object
      properties:
        total:
          type: integer
          format: int64
          minimum: 0
          description: Total number of result items in the result set.
        data:
          type: array
          items:
            type: object
          description: Array of result items.

    CopilotMessage:
      type: object
      properties:
        role:
          type: string
          description: Role of the message.
          enum:
            - user
            - copilot
          examples:
            - user
        content:
          type: object
          properties:
            type:
              type: string
              description: Type of the message. Fow now, only `"text"` is supported.
              enum:
                - text
              examples:
                - text
            text:
              type: string
              description: Text content of the message.
              examples:
                - Hello!

    CopilotTool:
      type: object
      properties:
        type:
          type: string
          description: type of the tool.
          enum:
            - function
          examples:
            - function
        function:
          type: object
          properties:
            name:
              type: string
              description: name of the function.
              enum:
                - create_project
              examples:
                - create_project
            description:
              type: string
              description: description of the function.
              examples:
                - create project
            parameters:
              type: object
              description: parameters of the function with json raw.
              examples:
                - { "name": "NiuXiaoQi" }
    Workflow:
      type: object
      properties:
        env:
          type: object
          description: env of the workflow.
          examples:
            - { "reference_id": "275" }

  parameters:
    SortOrder:
      name: sortOrder
      in: query
      schema:
        type: string
        enum:
          - asc
          - desc
        default: asc
        examples:
          - asc
      description: Order in which to sort the results.

    PageIndex:
      name: pageIndex
      in: query
      schema:
        type: integer
        format: int32
        minimum: 1
        default: 1
        examples:
          - 1
      description: Index of the page to retrieve.

    PageSize:
      name: pageSize
      in: query
      schema:
        type: integer
        format: int32
        minimum: 1
        maximum: 100
        default: 20
        examples:
          - 20
      description: Number of items per page.
