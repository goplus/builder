name: Validate database migrations
on:
  push:
    paths:
      - spx-backend/internal/migration/migrations/**
      - scripts/validate-database-migrations.sh
  pull_request:
    paths:
      - spx-backend/internal/migration/migrations/**
      - scripts/validate-database-migrations.sh
jobs:
  validate-database-migrations:
    runs-on: ubuntu-latest
    steps:
      - name: Check out code
        uses: actions/checkout@v6
      - name: Run database migration validation
        run: ./scripts/validate-database-migrations.sh
