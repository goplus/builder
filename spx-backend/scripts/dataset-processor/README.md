# SPX Backend Dataset Processor

è¿™æ˜¯ä¸€ä¸ªä¸“ä¸ºSPXåç«¯è®¾è®¡çš„æ¸¸æˆç´ ææ•°æ®é›†å¤„ç†å·¥å…·ï¼Œç”¨äºä»GitHubçš„Awesome Game Datasetsè·å–ã€æ¸…æ´—å’Œå¯¼å…¥æ¸¸æˆç´ ææ•°æ®ã€‚

## ğŸ¯ åŠŸèƒ½ç‰¹ç‚¹

- ğŸ” **æ™ºèƒ½æ•°æ®è·å–**: ä»GitHubè‡ªåŠ¨è·å–Awesome Game Datasets
- ğŸ§¹ **æ•°æ®æ¸…æ´—**: è¿‡æ»¤å‡ºé€‚åˆSPXå¹³å°çš„è½»é‡åŒ–ç´ æ
- ğŸ”„ **æ ¼å¼è½¬æ¢**: è½¬æ¢ä¸ºGameAssetæ¨¡å‹æ ¼å¼
- ğŸ“Š **æ‰¹é‡å¯¼å…¥**: é«˜æ•ˆå¯¼å…¥MySQLæ•°æ®åº“
- ğŸ“ˆ **è´¨é‡æŠ¥å‘Š**: ç”Ÿæˆè¯¦ç»†çš„å¤„ç†æŠ¥å‘Š

## ğŸ“ æ–‡ä»¶ç»“æ„

```
dataset-processor/
â”œâ”€â”€ 1_fetch_datasets.py    # æ­¥éª¤1: è·å–æ•°æ®é›†
â”œâ”€â”€ 2_clean_data.py        # æ­¥éª¤2: æ¸…æ´—å’Œç­›é€‰
â”œâ”€â”€ 3_convert_format.py    # æ­¥éª¤3: æ ¼å¼è½¬æ¢
â”œâ”€â”€ 4_import_to_db.py      # æ­¥éª¤4: å¯¼å…¥æ•°æ®åº“
â”œâ”€â”€ run_pipeline.py        # ä¸»æ‰§è¡Œè„šæœ¬
â”œâ”€â”€ config.json            # é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt       # Pythonä¾èµ–
â”œâ”€â”€ README.md              # æœ¬æ–‡æ¡£
â”œâ”€â”€ data/                  # æ•°æ®å­˜å‚¨ç›®å½•
â”‚   â”œâ”€â”€ raw/              # åŸå§‹æ•°æ®
â”‚   â””â”€â”€ cleaned/          # æ¸…æ´—åæ•°æ®
â””â”€â”€ output/               # è¾“å‡ºæ–‡ä»¶
    â”œâ”€â”€ game_assets.json  # JSONæ ¼å¼æ•°æ®
    â”œâ”€â”€ game_assets.sql   # SQLæ’å…¥è¯­å¥
    â””â”€â”€ *.md              # å¤„ç†æŠ¥å‘Š
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
cd scripts/dataset-processor
pip install -r requirements.txt
```

### 2. é…ç½®è®¾ç½®

ç¼–è¾‘ `config.json` æ–‡ä»¶:

```json
{
  "github": {
    "token": "ä½ çš„GitHub token (å¯é€‰)",
    "awesome_datasets_repo": "leomauro/awesome-game-datasets",
    "rate_limit_delay": 1
  },
  "database": {
    "host": "localhost",
    "port": 3306,
    "username": "root",
    "password": "ä½ çš„æ•°æ®åº“å¯†ç ",
    "database": "spx_backend",
    "table": "game_assets"
  }
}
```

### 3. è¿è¡Œå¤„ç†ç®¡é“

```bash
# è¿è¡Œä¸»è„šæœ¬ï¼Œé€‰æ‹©æ‰§è¡Œæ­¥éª¤
python run_pipeline.py

# æˆ–è€…ç›´æ¥è¿è¡Œå®Œæ•´ç®¡é“
python run_pipeline.py
# ç„¶åé€‰æ‹©é€‰é¡¹ 5 (è¿è¡Œå®Œæ•´ç®¡é“)
```

## ğŸ“‹ è¯¦ç»†æ­¥éª¤

### æ­¥éª¤1: è·å–æ•°æ®é›† ğŸ”

```bash
python 1_fetch_datasets.py
```

- ä»GitHubè·å–Awesome Game Datasetsä»“åº“ä¿¡æ¯
- è§£æREADMEä¸­çš„æ•°æ®é›†é“¾æ¥
- ä¸‹è½½é€‚åˆSPXå¹³å°çš„æ•°æ®é›†
- æå–æ¸¸æˆç´ æåç§°

**è¾“å‡º**: `data/raw/raw_asset_data.json`

### æ­¥éª¤2: æ¸…æ´—æ•°æ® ğŸ§¹

```bash
python 2_clean_data.py
```

- åŸºç¡€åç§°æ¸…æ´—ï¼ˆå»é™¤ç‰¹æ®Šå­—ç¬¦ã€HTMLæ ‡ç­¾ï¼‰
- SPXå¹³å°é€‚é…æ€§æ£€æŸ¥
- å»é™¤é‡å¤é¡¹å’Œä½è´¨é‡æ•°æ®
- æ·»åŠ ç½®ä¿¡åº¦è¯„åˆ†å’Œåˆ†ç±»æ ‡ç­¾

**è¾“å‡º**: `data/cleaned/cleaned_assets.json`

### æ­¥éª¤3: æ ¼å¼è½¬æ¢ ğŸ”„

```bash
python 3_convert_format.py
```

- è½¬æ¢ä¸ºGameAssetæ¨¡å‹æ ¼å¼
- ç”Ÿæˆå¤šç§è¾“å‡ºæ ¼å¼ï¼ˆJSONã€SQLã€CSVï¼‰
- æ•°æ®è´¨é‡éªŒè¯
- ç”Ÿæˆè½¬æ¢æŠ¥å‘Š

**è¾“å‡º**: 
- `output/game_assets.json` - æ•°æ®åº“å¯¼å…¥ç”¨
- `output/game_assets.sql` - SQLæ’å…¥è¯­å¥
- `output/sample_game_assets.go` - Goä»£ç æ ·æœ¬

### æ­¥éª¤4: å¯¼å…¥æ•°æ®åº“ ğŸ“Š

```bash
python 4_import_to_db.py
```

- è¿æ¥MySQLæ•°æ®åº“
- åˆ›å»º/æ£€æŸ¥è¡¨ç»“æ„
- æ‰¹é‡å¯¼å…¥æ•°æ®
- åˆ›å»ºä¼˜åŒ–ç´¢å¼•
- ç”Ÿæˆå¯¼å…¥æŠ¥å‘Š

**è¾“å‡º**: `output/import_report.md`

## âš™ï¸ é…ç½®é€‰é¡¹

### GitHubé…ç½®
- `token`: GitHub API tokenï¼ˆå¯é€‰ï¼Œä½†æ¨èï¼‰
- `rate_limit_delay`: APIè¯·æ±‚é—´éš”ï¼ˆç§’ï¼‰

### æ•°æ®è¿‡æ»¤
- `spx_keywords`: SPXå¹³å°ç›¸å…³å…³é”®è¯
- `exclude_keywords`: æ’é™¤å…³é”®è¯
- `min_name_length`: æœ€å°åç§°é•¿åº¦
- `max_name_length`: æœ€å¤§åç§°é•¿åº¦

### æ•°æ®åº“é…ç½®
- æ ‡å‡†MySQLè¿æ¥å‚æ•°
- `table`: ç›®æ ‡è¡¨å

### è¾“å‡ºé…ç½®
- `batch_size`: æ‰¹é‡å¤„ç†å¤§å°
- `max_assets`: æœ€å¤§ç´ ææ•°é‡
- `formats`: è¾“å‡ºæ ¼å¼åˆ—è¡¨

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **GitHub APIé™åˆ¶**
   - é…ç½®GitHub tokenä»¥è·å¾—æ›´é«˜çš„APIé™åˆ¶
   - å¢åŠ  `rate_limit_delay` å€¼

2. **æ•°æ®åº“è¿æ¥å¤±è´¥**
   - æ£€æŸ¥MySQLæœåŠ¡æ˜¯å¦è¿è¡Œ
   - éªŒè¯æ•°æ®åº“è¿æ¥å‚æ•°
   - ç¡®ä¿æ•°æ®åº“å­˜åœ¨

3. **æ•°æ®è´¨é‡é—®é¢˜**
   - è°ƒæ•´ `spx_keywords` å’Œ `exclude_keywords`
   - ä¿®æ”¹ç½®ä¿¡åº¦é˜ˆå€¼
   - æ£€æŸ¥æ•°æ®æ¸…æ´—è§„åˆ™

4. **å†…å­˜ä¸è¶³**
   - å‡å°‘ `max_assets` æ•°é‡
   - é™ä½ `batch_size`
   - åˆ†æ‰¹å¤„ç†æ•°æ®

### æ—¥å¿—æŸ¥çœ‹

æ‰€æœ‰æ­¥éª¤éƒ½ä¼šè¾“å‡ºè¯¦ç»†çš„è¿›åº¦ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š
- ğŸ“¥ æ•°æ®åŠ è½½è¿›åº¦
- ğŸ§¹ æ¸…æ´—ç»Ÿè®¡
- âœ… æˆåŠŸ/å¤±è´¥è®¡æ•°
- ğŸ“Š è´¨é‡æŠ¥å‘Š

## ğŸ“Š è¾“å‡ºè¯´æ˜

### JSONæ ¼å¼ (`game_assets.json`)
```json
[
  {
    "id": 1,
    "name": "Pixel Hero Character",
    "created_at": "2025-01-09T12:00:00Z",
    "updated_at": "2025-01-09T12:00:00Z",
    "deleted_at": null
  }
]
```

### SQLæ ¼å¼ (`game_assets.sql`)
åŒ…å«å®Œæ•´çš„è¡¨åˆ›å»ºå’Œæ•°æ®æ’å…¥è¯­å¥ï¼Œå¯ç›´æ¥åœ¨MySQLä¸­æ‰§è¡Œã€‚

### Goæ ·æœ¬ (`sample_game_assets.go`)
åŒ…å«å‰50ä¸ªé«˜è´¨é‡ç´ æçš„Goä»£ç ï¼Œå¯æ›¿æ¢ç°æœ‰æ ·æœ¬æ•°æ®ã€‚

## ğŸ”— APIé›†æˆ

å¤„ç†å®Œæˆåï¼Œæ¸¸æˆç´ ææ•°æ®å°†å¯é€šè¿‡SPXåç«¯çš„è‡ªåŠ¨è¡¥å…¨APIä½¿ç”¨ï¼š

```
GET /game-assets/complete?prefix=pixel&limit=5
```

è¿”å›ï¼š
```json
{
  "suggestions": [
    "Pixel Hero Character",
    "Pixel Art Background",
    "Pixelated UI Button"
  ]
}
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

1. **æ•°æ®åº“ç´¢å¼•**: è‡ªåŠ¨åˆ›å»ºåç§°å‰ç¼€ç´¢å¼•ç”¨äºå¿«é€ŸæŸ¥è¯¢
2. **æ‰¹é‡å¤„ç†**: ä½¿ç”¨æ‰¹é‡æ’å…¥æé«˜å¯¼å…¥æ•ˆç‡
3. **å†…å­˜ç®¡ç†**: åˆ†æ‰¹å¤„ç†é¿å…å†…å­˜æº¢å‡º
4. **APIé™åˆ¶**: æ™ºèƒ½é€Ÿç‡é™åˆ¶é¿å…è¢«GitHubé™åˆ¶

## ğŸ¤ è´¡çŒ®

å¦‚éœ€æ”¹è¿›æˆ–æ‰©å±•åŠŸèƒ½ï¼Œè¯·ï¼š
1. ä¿®æ”¹é…ç½®æ–‡ä»¶è°ƒæ•´è¿‡æ»¤è§„åˆ™
2. æ·»åŠ æ–°çš„æ•°æ®æºåˆ°æ­¥éª¤1
3. æ”¹è¿›æ•°æ®æ¸…æ´—ç®—æ³•åœ¨æ­¥éª¤2
4. æ‰©å±•è¾“å‡ºæ ¼å¼åœ¨æ­¥éª¤3

---

ğŸ’¡ **æç¤º**: é¦–æ¬¡è¿è¡Œå»ºè®®ä½¿ç”¨å¿«é€Ÿæ¨¡å¼ï¼ˆé€‰é¡¹6ï¼‰ï¼Œè·³è¿‡æ•°æ®è·å–æ­¥éª¤ï¼Œä½¿ç”¨ç°æœ‰çš„ç¤ºä¾‹æ•°æ®è¿›è¡Œæµ‹è¯•ã€‚