// Code generated by gop (Go+); DO NOT EDIT.

package main

import (
	"context"
	"errors"
	"github.com/goplus/builder/spx-backend/internal/controller"
	"github.com/goplus/builder/spx-backend/internal/log"
	"github.com/goplus/yap"
	"net/http"
	"os"
	"os/signal"
	"strconv"
	"syscall"
	"time"
)

const _ = true
const (
	firstPageIndex  = 1
	defaultPageSize = 10
)

type delete_asset_id struct {
	yap.Handler
	*AppV2
}
type delete_project_owner_name struct {
	yap.Handler
	*AppV2
}
type delete_project_owner_name_liking struct {
	yap.Handler
	*AppV2
}
type delete_user_username_following struct {
	yap.Handler
	*AppV2
}
type get_asset_id struct {
	yap.Handler
	*AppV2
}
type get_assets_list struct {
	yap.Handler
	*AppV2
}
type get_project_release_owner_project_release struct {
	yap.Handler
	*AppV2
}
type get_project_releases_list struct {
	yap.Handler
	*AppV2
}
type get_project_owner_name struct {
	yap.Handler
	*AppV2
}
type get_project_owner_name_liking struct {
	yap.Handler
	*AppV2
}
type get_projects_list struct {
	yap.Handler
	*AppV2
}
type get_storyline_id struct {
	yap.Handler
	*AppV2
}
type get_storyline_id_study struct {
	yap.Handler
	*AppV2
}
type get_storylines_list struct {
	yap.Handler
	*AppV2
}
type get_user_username struct {
	yap.Handler
	*AppV2
}
type get_user_username_following struct {
	yap.Handler
	*AppV2
}
type get_users_list struct {
	yap.Handler
	*AppV2
}
type get_util_upinfo struct {
	yap.Handler
	*AppV2
}
type AppV2 struct {
	yap.AppV2
	ctrl *controller.Controller
	err  error
}
type post_aigc_matting struct {
	yap.Handler
	*AppV2
}
type post_asset struct {
	yap.Handler
	*AppV2
}
type post_copilot_message struct {
	yap.Handler
	*AppV2
}
type post_project_release struct {
	yap.Handler
	*AppV2
}
type post_project struct {
	yap.Handler
	*AppV2
}
type post_project_owner_name_liking struct {
	yap.Handler
	*AppV2
}
type post_project_owner_name_view struct {
	yap.Handler
	*AppV2
}
type post_storyline_id_study struct {
	yap.Handler
	*AppV2
}
type post_user_username_following struct {
	yap.Handler
	*AppV2
}
type post_util_fileurls struct {
	yap.Handler
	*AppV2
}
type post_util_fmtcode struct {
	yap.Handler
	*AppV2
}
type post_util_guidance_check struct {
	yap.Handler
	*AppV2
}
type put_asset_id struct {
	yap.Handler
	*AppV2
}
type put_project_owner_name struct {
	yap.Handler
	*AppV2
}
type put_storyline_id_study struct {
	yap.Handler
	*AppV2
}
type put_user struct {
	yap.Handler
	*AppV2
}
//line cmd/spx-backend/main.yap:26
func (this *AppV2) MainEntry() {
//line cmd/spx-backend/main.yap:26:1
	logger := log.GetLogger()
//line cmd/spx-backend/main.yap:28:1
	this.ctrl, this.err = controller.New(context.Background())
//line cmd/spx-backend/main.yap:29:1
	if this.err != nil {
//line cmd/spx-backend/main.yap:30:1
		logger.Fatalln("Failed to create a new controller:", this.err)
	}
//line cmd/spx-backend/main.yap:33:1
	port := os.Getenv("PORT")
//line cmd/spx-backend/main.yap:34:1
	if port == "" {
//line cmd/spx-backend/main.yap:35:1
		port = ":8080"
	}
//line cmd/spx-backend/main.yap:37:1
	logger.Printf("Listening to %s", port)
//line cmd/spx-backend/main.yap:39:1
	h := this.Handler(NewUserMiddleware(this.ctrl), NewReqIDMiddleware(), NewCORSMiddleware())
//line cmd/spx-backend/main.yap:40:1
	server := &http.Server{Addr: port, Handler: h}
//line cmd/spx-backend/main.yap:42:1
	stopCtx, stop := signal.NotifyContext(context.Background(), syscall.SIGINT, syscall.SIGTERM)
//line cmd/spx-backend/main.yap:43:1
	defer stop()
//line cmd/spx-backend/main.yap:44:1
	var serverErr error
//line cmd/spx-backend/main.yap:45:1
	go func() {
//line cmd/spx-backend/main.yap:46:1
		serverErr = server.ListenAndServe()
//line cmd/spx-backend/main.yap:47:1
		stop()
	}()
//line cmd/spx-backend/main.yap:49:1
	<-stopCtx.Done()
//line cmd/spx-backend/main.yap:50:1
	if serverErr != nil && !errors.Is(serverErr, http.ErrServerClosed) {
//line cmd/spx-backend/main.yap:51:1
		logger.Fatalln("Server error:", serverErr)
	}
//line cmd/spx-backend/main.yap:54:1
	shutdownCtx, cancel := context.WithTimeout(context.Background(), time.Minute)
//line cmd/spx-backend/main.yap:55:1
	defer cancel()
//line cmd/spx-backend/main.yap:56:1
	if
//line cmd/spx-backend/main.yap:56:1
	err := server.Shutdown(shutdownCtx); err != nil {
//line cmd/spx-backend/main.yap:57:1
		logger.Fatalln("Failed to gracefully shut down:", err)
	}
}
func (this *AppV2) Main() {
	yap.Gopt_AppV2_Main(this, new(delete_asset_id), new(delete_project_owner_name), new(delete_project_owner_name_liking), new(delete_user_username_following), new(get_asset_id), new(get_assets_list), new(get_project_release_owner_project_release), new(get_project_releases_list), new(get_project_owner_name), new(get_project_owner_name_liking), new(get_projects_list), new(get_storyline_id), new(get_storyline_id_study), new(get_storylines_list), new(get_user_username), new(get_user_username_following), new(get_users_list), new(get_util_upinfo), new(post_aigc_matting), new(post_asset), new(post_copilot_message), new(post_project_release), new(post_project), new(post_project_owner_name_liking), new(post_project_owner_name_view), new(post_storyline_id_study), new(post_user_username_following), new(post_util_fileurls), new(post_util_fmtcode), new(post_util_guidance_check), new(put_asset_id), new(put_project_owner_name), new(put_storyline_id_study), new(put_user))
}
//line cmd/spx-backend/delete_asset_#id.yap:6
func (this *delete_asset_id) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/delete_asset_#id.yap:6:1
	ctx := &this.Context
//line cmd/spx-backend/delete_asset_#id.yap:7:1
	if
//line cmd/spx-backend/delete_asset_#id.yap:7:1
	_, isAuthed := ensureAuthedUser(ctx); !isAuthed {
//line cmd/spx-backend/delete_asset_#id.yap:8:1
		return
	}
//line cmd/spx-backend/delete_asset_#id.yap:11:1
	if
//line cmd/spx-backend/delete_asset_#id.yap:11:1
	err := this.ctrl.DeleteAsset(ctx.Context(), this.Gop_Env("id")); err != nil {
//line cmd/spx-backend/delete_asset_#id.yap:12:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/delete_asset_#id.yap:13:1
		return
	}
//line cmd/spx-backend/delete_asset_#id.yap:15:1
	this.Text__0(204, "", "")
}
func (this *delete_asset_id) Classfname() string {
	return "delete_asset_#id"
}
//line cmd/spx-backend/delete_project_#owner_#name.yap:6
func (this *delete_project_owner_name) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/delete_project_#owner_#name.yap:6:1
	ctx := &this.Context
//line cmd/spx-backend/delete_project_#owner_#name.yap:7:1
	if
//line cmd/spx-backend/delete_project_#owner_#name.yap:7:1
	_, isAuthed := ensureAuthedUser(ctx); !isAuthed {
//line cmd/spx-backend/delete_project_#owner_#name.yap:8:1
		return
	}
//line cmd/spx-backend/delete_project_#owner_#name.yap:11:1
	if
//line cmd/spx-backend/delete_project_#owner_#name.yap:11:1
	err := this.ctrl.DeleteProject(ctx.Context(), this.Gop_Env("owner"), this.Gop_Env("name")); err != nil {
//line cmd/spx-backend/delete_project_#owner_#name.yap:12:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/delete_project_#owner_#name.yap:13:1
		return
	}
//line cmd/spx-backend/delete_project_#owner_#name.yap:15:1
	this.Text__0(204, "", "")
}
func (this *delete_project_owner_name) Classfname() string {
	return "delete_project_#owner_#name"
}
//line cmd/spx-backend/delete_project_#owner_#name_liking.yap:6
func (this *delete_project_owner_name_liking) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/delete_project_#owner_#name_liking.yap:6:1
	ctx := &this.Context
//line cmd/spx-backend/delete_project_#owner_#name_liking.yap:7:1
	if
//line cmd/spx-backend/delete_project_#owner_#name_liking.yap:7:1
	_, isAuthed := ensureAuthedUser(ctx); !isAuthed {
//line cmd/spx-backend/delete_project_#owner_#name_liking.yap:8:1
		return
	}
//line cmd/spx-backend/delete_project_#owner_#name_liking.yap:11:1
	if
//line cmd/spx-backend/delete_project_#owner_#name_liking.yap:11:1
	err := this.ctrl.UnlikeProject(ctx.Context(), this.Gop_Env("owner"), this.Gop_Env("name")); err != nil {
//line cmd/spx-backend/delete_project_#owner_#name_liking.yap:12:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/delete_project_#owner_#name_liking.yap:13:1
		return
	}
//line cmd/spx-backend/delete_project_#owner_#name_liking.yap:15:1
	this.Text__0(204, "", "")
}
func (this *delete_project_owner_name_liking) Classfname() string {
	return "delete_project_#owner_#name_liking"
}
//line cmd/spx-backend/delete_user_#username_following.yap:6
func (this *delete_user_username_following) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/delete_user_#username_following.yap:6:1
	ctx := &this.Context
//line cmd/spx-backend/delete_user_#username_following.yap:7:1
	if
//line cmd/spx-backend/delete_user_#username_following.yap:7:1
	_, isAuthed := ensureAuthedUser(ctx); !isAuthed {
//line cmd/spx-backend/delete_user_#username_following.yap:8:1
		return
	}
//line cmd/spx-backend/delete_user_#username_following.yap:11:1
	if
//line cmd/spx-backend/delete_user_#username_following.yap:11:1
	err := this.ctrl.UnfollowUser(ctx.Context(), this.Gop_Env("username")); err != nil {
//line cmd/spx-backend/delete_user_#username_following.yap:12:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/delete_user_#username_following.yap:13:1
		return
	}
//line cmd/spx-backend/delete_user_#username_following.yap:15:1
	this.Text__0(204, "", "")
}
func (this *delete_user_username_following) Classfname() string {
	return "delete_user_#username_following"
}
//line cmd/spx-backend/get_asset_#id.yap:6
func (this *get_asset_id) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/get_asset_#id.yap:6:1
	ctx := &this.Context
//line cmd/spx-backend/get_asset_#id.yap:8:1
	asset, err := this.ctrl.GetAsset(ctx.Context(), this.Gop_Env("id"))
//line cmd/spx-backend/get_asset_#id.yap:9:1
	if err != nil {
//line cmd/spx-backend/get_asset_#id.yap:10:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/get_asset_#id.yap:11:1
		return
	}
//line cmd/spx-backend/get_asset_#id.yap:13:1
	this.Json__1(asset)
}
func (this *get_asset_id) Classfname() string {
	return "get_asset_#id"
}
//line cmd/spx-backend/get_assets_list.yap:10
func (this *get_assets_list) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/get_assets_list.yap:10:1
	ctx := &this.Context
//line cmd/spx-backend/get_assets_list.yap:12:1
	params := controller.NewListAssetsParams()
//line cmd/spx-backend/get_assets_list.yap:14:1
	if
//line cmd/spx-backend/get_assets_list.yap:14:1
	keyword := this.Gop_Env("keyword"); keyword != "" {
//line cmd/spx-backend/get_assets_list.yap:15:1
		params.Keyword = &keyword
	}
//line cmd/spx-backend/get_assets_list.yap:18:1
	switch
//line cmd/spx-backend/get_assets_list.yap:18:1
	owner := this.Gop_Env("owner"); owner {
//line cmd/spx-backend/get_assets_list.yap:19:1
	case "":
//line cmd/spx-backend/get_assets_list.yap:20:1
		mAuthedUser, isAuthed := ensureAuthedUser(ctx)
//line cmd/spx-backend/get_assets_list.yap:21:1
		if !isAuthed {
//line cmd/spx-backend/get_assets_list.yap:22:1
			return
		}
//line cmd/spx-backend/get_assets_list.yap:24:1
		params.Owner = &mAuthedUser.Username
//line cmd/spx-backend/get_assets_list.yap:25:1
	case "*":
//line cmd/spx-backend/get_assets_list.yap:26:1
		params.Owner = nil
//line cmd/spx-backend/get_assets_list.yap:27:1
	default:
//line cmd/spx-backend/get_assets_list.yap:28:1
		params.Owner = &owner
	}
//line cmd/spx-backend/get_assets_list.yap:31:1
	if
//line cmd/spx-backend/get_assets_list.yap:31:1
	typeParam := ctx.Param("type"); typeParam != "" {
//line cmd/spx-backend/get_assets_list.yap:32:1
		params.Type = &typeParam
	}
//line cmd/spx-backend/get_assets_list.yap:35:1
	if
//line cmd/spx-backend/get_assets_list.yap:35:1
	category := this.Gop_Env("category"); category != "" {
//line cmd/spx-backend/get_assets_list.yap:36:1
		params.Category = &category
	}
//line cmd/spx-backend/get_assets_list.yap:39:1
	if
//line cmd/spx-backend/get_assets_list.yap:39:1
	filesHash := this.Gop_Env("filesHash"); filesHash != "" {
//line cmd/spx-backend/get_assets_list.yap:40:1
		params.FilesHash = &filesHash
	}
//line cmd/spx-backend/get_assets_list.yap:43:1
	if
//line cmd/spx-backend/get_assets_list.yap:43:1
	visibility := this.Gop_Env("visibility"); visibility != "" {
//line cmd/spx-backend/get_assets_list.yap:44:1
		params.Visibility = &visibility
	}
//line cmd/spx-backend/get_assets_list.yap:47:1
	if
//line cmd/spx-backend/get_assets_list.yap:47:1
	orderBy := this.Gop_Env("orderBy"); orderBy != "" {
//line cmd/spx-backend/get_assets_list.yap:48:1
		params.OrderBy = controller.ListAssetsOrderBy(orderBy)
	}
//line cmd/spx-backend/get_assets_list.yap:50:1
	if
//line cmd/spx-backend/get_assets_list.yap:50:1
	sortOrder := this.Gop_Env("sortOrder"); sortOrder != "" {
//line cmd/spx-backend/get_assets_list.yap:51:1
		params.SortOrder = controller.SortOrder(sortOrder)
	}
//line cmd/spx-backend/get_assets_list.yap:54:1
	params.Pagination.Index = ctx.ParamInt("pageIndex", firstPageIndex)
//line cmd/spx-backend/get_assets_list.yap:55:1
	params.Pagination.Size = ctx.ParamInt("pageSize", defaultPageSize)
//line cmd/spx-backend/get_assets_list.yap:56:1
	if
//line cmd/spx-backend/get_assets_list.yap:56:1
	ok, msg := params.Validate(); !ok {
//line cmd/spx-backend/get_assets_list.yap:57:1
		replyWithCodeMsg(ctx, errorInvalidArgs, msg)
//line cmd/spx-backend/get_assets_list.yap:58:1
		return
	}
//line cmd/spx-backend/get_assets_list.yap:61:1
	assets, err := this.ctrl.ListAssets(ctx.Context(), params)
//line cmd/spx-backend/get_assets_list.yap:62:1
	if err != nil {
//line cmd/spx-backend/get_assets_list.yap:63:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/get_assets_list.yap:64:1
		return
	}
//line cmd/spx-backend/get_assets_list.yap:66:1
	this.Json__1(assets)
}
func (this *get_assets_list) Classfname() string {
	return "get_assets_list"
}
//line cmd/spx-backend/get_project-release_#owner_#project_#release.yap:6
func (this *get_project_release_owner_project_release) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/get_project-release_#owner_#project_#release.yap:6:1
	ctx := &this.Context
//line cmd/spx-backend/get_project-release_#owner_#project_#release.yap:8:1
	projectRelease, err := this.ctrl.GetProjectRelease(ctx.Context(), this.Gop_Env("owner"), this.Gop_Env("project"), this.Gop_Env("release"))
//line cmd/spx-backend/get_project-release_#owner_#project_#release.yap:9:1
	if err != nil {
//line cmd/spx-backend/get_project-release_#owner_#project_#release.yap:10:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/get_project-release_#owner_#project_#release.yap:11:1
		return
	}
//line cmd/spx-backend/get_project-release_#owner_#project_#release.yap:13:1
	this.Json__1(projectRelease)
}
func (this *get_project_release_owner_project_release) Classfname() string {
	return "get_project-release_#owner_#project_#release"
}
//line cmd/spx-backend/get_project-releases_list.yap:10
func (this *get_project_releases_list) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/get_project-releases_list.yap:10:1
	ctx := &this.Context
//line cmd/spx-backend/get_project-releases_list.yap:12:1
	params := controller.NewListProjectReleasesParams()
//line cmd/spx-backend/get_project-releases_list.yap:14:1
	if
//line cmd/spx-backend/get_project-releases_list.yap:14:1
	projectFullName := this.Gop_Env("projectFullName"); projectFullName != "" {
//line cmd/spx-backend/get_project-releases_list.yap:15:1
		params.ProjectFullName = &projectFullName
	}
//line cmd/spx-backend/get_project-releases_list.yap:18:1
	if
//line cmd/spx-backend/get_project-releases_list.yap:18:1
	orderBy := this.Gop_Env("orderBy"); orderBy != "" {
//line cmd/spx-backend/get_project-releases_list.yap:19:1
		params.OrderBy = controller.ListProjectReleasesOrderBy(orderBy)
	}
//line cmd/spx-backend/get_project-releases_list.yap:21:1
	if
//line cmd/spx-backend/get_project-releases_list.yap:21:1
	sortOrder := this.Gop_Env("sortOrder"); sortOrder != "" {
//line cmd/spx-backend/get_project-releases_list.yap:22:1
		params.SortOrder = controller.SortOrder(sortOrder)
	}
//line cmd/spx-backend/get_project-releases_list.yap:25:1
	params.Pagination.Index = ctx.ParamInt("pageIndex", firstPageIndex)
//line cmd/spx-backend/get_project-releases_list.yap:26:1
	params.Pagination.Size = ctx.ParamInt("pageSize", defaultPageSize)
//line cmd/spx-backend/get_project-releases_list.yap:27:1
	if
//line cmd/spx-backend/get_project-releases_list.yap:27:1
	ok, msg := params.Validate(); !ok {
//line cmd/spx-backend/get_project-releases_list.yap:28:1
		replyWithCodeMsg(ctx, errorInvalidArgs, msg)
//line cmd/spx-backend/get_project-releases_list.yap:29:1
		return
	}
//line cmd/spx-backend/get_project-releases_list.yap:32:1
	projectReleases, err := this.ctrl.ListProjectReleases(ctx.Context(), params)
//line cmd/spx-backend/get_project-releases_list.yap:33:1
	if err != nil {
//line cmd/spx-backend/get_project-releases_list.yap:34:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/get_project-releases_list.yap:35:1
		return
	}
//line cmd/spx-backend/get_project-releases_list.yap:37:1
	this.Json__1(projectReleases)
}
func (this *get_project_releases_list) Classfname() string {
	return "get_project-releases_list"
}
//line cmd/spx-backend/get_project_#owner_#name.yap:6
func (this *get_project_owner_name) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/get_project_#owner_#name.yap:6:1
	ctx := &this.Context
//line cmd/spx-backend/get_project_#owner_#name.yap:8:1
	project, err := this.ctrl.GetProject(ctx.Context(), this.Gop_Env("owner"), this.Gop_Env("name"))
//line cmd/spx-backend/get_project_#owner_#name.yap:9:1
	if err != nil {
//line cmd/spx-backend/get_project_#owner_#name.yap:10:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/get_project_#owner_#name.yap:11:1
		return
	}
//line cmd/spx-backend/get_project_#owner_#name.yap:13:1
	this.Json__1(project)
}
func (this *get_project_owner_name) Classfname() string {
	return "get_project_#owner_#name"
}
//line cmd/spx-backend/get_project_#owner_#name_liking.yap:6
func (this *get_project_owner_name_liking) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/get_project_#owner_#name_liking.yap:6:1
	ctx := &this.Context
//line cmd/spx-backend/get_project_#owner_#name_liking.yap:7:1
	if
//line cmd/spx-backend/get_project_#owner_#name_liking.yap:7:1
	_, isAuthed := ensureAuthedUser(ctx); !isAuthed {
//line cmd/spx-backend/get_project_#owner_#name_liking.yap:8:1
		return
	}
//line cmd/spx-backend/get_project_#owner_#name_liking.yap:11:1
	hasLiked, err := this.ctrl.HasLikedProject(ctx.Context(), this.Gop_Env("owner"), this.Gop_Env("name"))
//line cmd/spx-backend/get_project_#owner_#name_liking.yap:12:1
	if err != nil {
//line cmd/spx-backend/get_project_#owner_#name_liking.yap:13:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/get_project_#owner_#name_liking.yap:14:1
		return
	}
//line cmd/spx-backend/get_project_#owner_#name_liking.yap:16:1
	if hasLiked {
//line cmd/spx-backend/get_project_#owner_#name_liking.yap:17:1
		ctx.Text__0(204, "", "")
	} else {
//line cmd/spx-backend/get_project_#owner_#name_liking.yap:19:1
		replyWithCode(ctx, errorNotFound)
	}
}
func (this *get_project_owner_name_liking) Classfname() string {
	return "get_project_#owner_#name_liking"
}
//line cmd/spx-backend/get_projects_list.yap:13
func (this *get_projects_list) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/get_projects_list.yap:13:1
	ctx := &this.Context
//line cmd/spx-backend/get_projects_list.yap:15:1
	params := controller.NewListProjectsParams()
//line cmd/spx-backend/get_projects_list.yap:17:1
	switch
//line cmd/spx-backend/get_projects_list.yap:17:1
	owner := this.Gop_Env("owner"); owner {
//line cmd/spx-backend/get_projects_list.yap:18:1
	case "":
//line cmd/spx-backend/get_projects_list.yap:19:1
		mAuthedUser, isAuthed := ensureAuthedUser(ctx)
//line cmd/spx-backend/get_projects_list.yap:20:1
		if !isAuthed {
//line cmd/spx-backend/get_projects_list.yap:21:1
			return
		}
//line cmd/spx-backend/get_projects_list.yap:23:1
		params.Owner = &mAuthedUser.Username
//line cmd/spx-backend/get_projects_list.yap:24:1
	case "*":
//line cmd/spx-backend/get_projects_list.yap:25:1
		params.Owner = nil
//line cmd/spx-backend/get_projects_list.yap:26:1
	default:
//line cmd/spx-backend/get_projects_list.yap:27:1
		params.Owner = &owner
	}
//line cmd/spx-backend/get_projects_list.yap:30:1
	if
//line cmd/spx-backend/get_projects_list.yap:30:1
	remixedFrom := this.Gop_Env("remixedFrom"); remixedFrom != "" {
//line cmd/spx-backend/get_projects_list.yap:31:1
		params.RemixedFrom = &remixedFrom
	}
//line cmd/spx-backend/get_projects_list.yap:34:1
	if
//line cmd/spx-backend/get_projects_list.yap:34:1
	keyword := this.Gop_Env("keyword"); keyword != "" {
//line cmd/spx-backend/get_projects_list.yap:35:1
		params.Keyword = &keyword
	}
//line cmd/spx-backend/get_projects_list.yap:38:1
	if
//line cmd/spx-backend/get_projects_list.yap:38:1
	visibility := this.Gop_Env("visibility"); visibility != "" {
//line cmd/spx-backend/get_projects_list.yap:39:1
		params.Visibility = &visibility
	}
//line cmd/spx-backend/get_projects_list.yap:42:1
	if
//line cmd/spx-backend/get_projects_list.yap:42:1
	liker := this.Gop_Env("liker"); liker != "" {
//line cmd/spx-backend/get_projects_list.yap:43:1
		params.Liker = &liker
	}
//line cmd/spx-backend/get_projects_list.yap:46:1
	if
//line cmd/spx-backend/get_projects_list.yap:46:1
	createdAfter := this.Gop_Env("createdAfter"); createdAfter != "" {
//line cmd/spx-backend/get_projects_list.yap:47:1
		createdAfterTime, err := time.Parse(time.RFC3339Nano, createdAfter)
//line cmd/spx-backend/get_projects_list.yap:48:1
		if err != nil {
//line cmd/spx-backend/get_projects_list.yap:49:1
			replyWithCodeMsg(ctx, errorInvalidArgs, "invalid createdAfter")
//line cmd/spx-backend/get_projects_list.yap:50:1
			return
		}
//line cmd/spx-backend/get_projects_list.yap:52:1
		params.CreatedAfter = &createdAfterTime
	}
//line cmd/spx-backend/get_projects_list.yap:55:1
	if
//line cmd/spx-backend/get_projects_list.yap:55:1
	likesReceivedAfter := this.Gop_Env("likesReceivedAfter"); likesReceivedAfter != "" {
//line cmd/spx-backend/get_projects_list.yap:56:1
		likesReceivedAfterTime, err := time.Parse(time.RFC3339Nano, likesReceivedAfter)
//line cmd/spx-backend/get_projects_list.yap:57:1
		if err != nil {
//line cmd/spx-backend/get_projects_list.yap:58:1
			replyWithCodeMsg(ctx, errorInvalidArgs, "invalid likesReceivedAfter")
//line cmd/spx-backend/get_projects_list.yap:59:1
			return
		}
//line cmd/spx-backend/get_projects_list.yap:61:1
		params.LikesReceivedAfter = &likesReceivedAfterTime
	}
//line cmd/spx-backend/get_projects_list.yap:64:1
	if
//line cmd/spx-backend/get_projects_list.yap:64:1
	remixesReceivedAfter := this.Gop_Env("remixesReceivedAfter"); remixesReceivedAfter != "" {
//line cmd/spx-backend/get_projects_list.yap:65:1
		remixesReceivedAfterTime, err := time.Parse(time.RFC3339Nano, remixesReceivedAfter)
//line cmd/spx-backend/get_projects_list.yap:66:1
		if err != nil {
//line cmd/spx-backend/get_projects_list.yap:67:1
			replyWithCodeMsg(ctx, errorInvalidArgs, "invalid remixesReceivedAfter")
//line cmd/spx-backend/get_projects_list.yap:68:1
			return
		}
//line cmd/spx-backend/get_projects_list.yap:70:1
		params.RemixesReceivedAfter = &remixesReceivedAfterTime
	}
//line cmd/spx-backend/get_projects_list.yap:73:1
	if
//line cmd/spx-backend/get_projects_list.yap:73:1
	fromFollowees := this.Gop_Env("fromFollowees"); fromFollowees != "" {
//line cmd/spx-backend/get_projects_list.yap:74:1
		fromFolloweesBool, err := strconv.ParseBool(fromFollowees)
//line cmd/spx-backend/get_projects_list.yap:75:1
		if err != nil {
//line cmd/spx-backend/get_projects_list.yap:76:1
			replyWithCodeMsg(ctx, errorInvalidArgs, "invalid fromFollowees")
//line cmd/spx-backend/get_projects_list.yap:77:1
			return
		}
//line cmd/spx-backend/get_projects_list.yap:79:1
		params.FromFollowees = &fromFolloweesBool
	}
//line cmd/spx-backend/get_projects_list.yap:82:1
	if
//line cmd/spx-backend/get_projects_list.yap:82:1
	orderBy := this.Gop_Env("orderBy"); orderBy != "" {
//line cmd/spx-backend/get_projects_list.yap:83:1
		params.OrderBy = controller.ListProjectsOrderBy(orderBy)
	}
//line cmd/spx-backend/get_projects_list.yap:85:1
	if
//line cmd/spx-backend/get_projects_list.yap:85:1
	sortOrder := this.Gop_Env("sortOrder"); sortOrder != "" {
//line cmd/spx-backend/get_projects_list.yap:86:1
		params.SortOrder = controller.SortOrder(sortOrder)
	}
//line cmd/spx-backend/get_projects_list.yap:89:1
	params.Pagination.Index = this.ParamInt("pageIndex", firstPageIndex)
//line cmd/spx-backend/get_projects_list.yap:90:1
	params.Pagination.Size = this.ParamInt("pageSize", defaultPageSize)
//line cmd/spx-backend/get_projects_list.yap:91:1
	if
//line cmd/spx-backend/get_projects_list.yap:91:1
	ok, msg := params.Validate(); !ok {
//line cmd/spx-backend/get_projects_list.yap:92:1
		replyWithCodeMsg(ctx, errorInvalidArgs, msg)
//line cmd/spx-backend/get_projects_list.yap:93:1
		return
	}
//line cmd/spx-backend/get_projects_list.yap:96:1
	projects, err := this.ctrl.ListProjects(ctx.Context(), params)
//line cmd/spx-backend/get_projects_list.yap:97:1
	if err != nil {
//line cmd/spx-backend/get_projects_list.yap:98:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/get_projects_list.yap:99:1
		return
	}
//line cmd/spx-backend/get_projects_list.yap:101:1
	this.Json__1(projects)
}
func (this *get_projects_list) Classfname() string {
	return "get_projects_list"
}
//line cmd/spx-backend/get_storyline_#id.yap:6
func (this *get_storyline_id) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/get_storyline_#id.yap:6:1
	ctx := &this.Context
//line cmd/spx-backend/get_storyline_#id.yap:8:1
	storyline, err := this.ctrl.GetStoryline(ctx.Context(), this.Gop_Env("id"))
//line cmd/spx-backend/get_storyline_#id.yap:9:1
	if err != nil {
//line cmd/spx-backend/get_storyline_#id.yap:10:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/get_storyline_#id.yap:11:1
		return
	}
//line cmd/spx-backend/get_storyline_#id.yap:13:1
	this.Json__1(storyline)
}
func (this *get_storyline_id) Classfname() string {
	return "get_storyline_#id"
}
//line cmd/spx-backend/get_storyline_#id_study.yap:6
func (this *get_storyline_id_study) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/get_storyline_#id_study.yap:6:1
	ctx := &this.Context
//line cmd/spx-backend/get_storyline_#id_study.yap:7:1
	if
//line cmd/spx-backend/get_storyline_#id_study.yap:7:1
	_, isAuthed := ensureAuthedUser(ctx); !isAuthed {
//line cmd/spx-backend/get_storyline_#id_study.yap:8:1
		return
	}
//line cmd/spx-backend/get_storyline_#id_study.yap:11:1
	userStorylineRelationship, err := this.ctrl.GetStoryLineStudy(ctx.Context(), this.Gop_Env("id"))
//line cmd/spx-backend/get_storyline_#id_study.yap:12:1
	if err != nil {
//line cmd/spx-backend/get_storyline_#id_study.yap:13:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/get_storyline_#id_study.yap:14:1
		return
	}
//line cmd/spx-backend/get_storyline_#id_study.yap:16:1
	this.Json__1(userStorylineRelationship)
}
func (this *get_storyline_id_study) Classfname() string {
	return "get_storyline_#id_study"
}
//line cmd/spx-backend/get_storylines_list.yap:10
func (this *get_storylines_list) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/get_storylines_list.yap:10:1
	ctx := &this.Context
//line cmd/spx-backend/get_storylines_list.yap:12:1
	params := controller.NewListStorylineParams()
//line cmd/spx-backend/get_storylines_list.yap:14:1
	if
//line cmd/spx-backend/get_storylines_list.yap:14:1
	tag := this.Gop_Env("tag"); tag != "" {
//line cmd/spx-backend/get_storylines_list.yap:15:1
		params.Tag = &tag
	}
//line cmd/spx-backend/get_storylines_list.yap:18:1
	if
//line cmd/spx-backend/get_storylines_list.yap:18:1
	sortOrder := this.Gop_Env("sortOrder"); sortOrder != "" {
//line cmd/spx-backend/get_storylines_list.yap:19:1
		params.SortOrder = controller.SortOrder(sortOrder)
	}
//line cmd/spx-backend/get_storylines_list.yap:22:1
	params.Pagination.Index = ctx.ParamInt("pageIndex", firstPageIndex)
//line cmd/spx-backend/get_storylines_list.yap:23:1
	params.Pagination.Size = ctx.ParamInt("pageSize", defaultPageSize)
//line cmd/spx-backend/get_storylines_list.yap:25:1
	if
//line cmd/spx-backend/get_storylines_list.yap:25:1
	ok, msg := params.Validate(); !ok {
//line cmd/spx-backend/get_storylines_list.yap:26:1
		replyWithCodeMsg(ctx, errorInvalidArgs, msg)
//line cmd/spx-backend/get_storylines_list.yap:27:1
		return
	}
//line cmd/spx-backend/get_storylines_list.yap:30:1
	storylines, err := this.ctrl.ListStoryline(ctx.Context(), params)
//line cmd/spx-backend/get_storylines_list.yap:31:1
	if err != nil {
//line cmd/spx-backend/get_storylines_list.yap:32:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/get_storylines_list.yap:33:1
		return
	}
//line cmd/spx-backend/get_storylines_list.yap:35:1
	this.Json__1(storylines)
}
func (this *get_storylines_list) Classfname() string {
	return "get_storylines_list"
}
//line cmd/spx-backend/get_user_#username.yap:6
func (this *get_user_username) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/get_user_#username.yap:6:1
	ctx := &this.Context
//line cmd/spx-backend/get_user_#username.yap:8:1
	user, err := this.ctrl.GetUser(ctx.Context(), this.Gop_Env("username"))
//line cmd/spx-backend/get_user_#username.yap:9:1
	if err != nil {
//line cmd/spx-backend/get_user_#username.yap:10:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/get_user_#username.yap:11:1
		return
	}
//line cmd/spx-backend/get_user_#username.yap:13:1
	this.Json__1(user)
}
func (this *get_user_username) Classfname() string {
	return "get_user_#username"
}
//line cmd/spx-backend/get_user_#username_following.yap:6
func (this *get_user_username_following) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/get_user_#username_following.yap:6:1
	ctx := &this.Context
//line cmd/spx-backend/get_user_#username_following.yap:7:1
	if
//line cmd/spx-backend/get_user_#username_following.yap:7:1
	_, isAuthed := ensureAuthedUser(ctx); !isAuthed {
//line cmd/spx-backend/get_user_#username_following.yap:8:1
		return
	}
//line cmd/spx-backend/get_user_#username_following.yap:11:1
	isFollowing, err := this.ctrl.IsFollowingUser(ctx.Context(), this.Gop_Env("username"))
//line cmd/spx-backend/get_user_#username_following.yap:12:1
	if err != nil {
//line cmd/spx-backend/get_user_#username_following.yap:13:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/get_user_#username_following.yap:14:1
		return
	}
//line cmd/spx-backend/get_user_#username_following.yap:16:1
	if isFollowing {
//line cmd/spx-backend/get_user_#username_following.yap:17:1
		ctx.Text__0(204, "", "")
	} else {
//line cmd/spx-backend/get_user_#username_following.yap:19:1
		replyWithCode(ctx, errorNotFound)
	}
}
func (this *get_user_username_following) Classfname() string {
	return "get_user_#username_following"
}
//line cmd/spx-backend/get_users_list.yap:10
func (this *get_users_list) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/get_users_list.yap:10:1
	ctx := &this.Context
//line cmd/spx-backend/get_users_list.yap:12:1
	params := controller.NewListUsersParams()
//line cmd/spx-backend/get_users_list.yap:14:1
	if
//line cmd/spx-backend/get_users_list.yap:14:1
	follower := this.Gop_Env("follower"); follower != "" {
//line cmd/spx-backend/get_users_list.yap:15:1
		params.Follower = &follower
	}
//line cmd/spx-backend/get_users_list.yap:18:1
	if
//line cmd/spx-backend/get_users_list.yap:18:1
	followee := this.Gop_Env("followee"); followee != "" {
//line cmd/spx-backend/get_users_list.yap:19:1
		params.Followee = &followee
	}
//line cmd/spx-backend/get_users_list.yap:22:1
	if
//line cmd/spx-backend/get_users_list.yap:22:1
	orderBy := this.Gop_Env("orderBy"); orderBy != "" {
//line cmd/spx-backend/get_users_list.yap:23:1
		params.OrderBy = controller.ListUsersOrderBy(orderBy)
	}
//line cmd/spx-backend/get_users_list.yap:25:1
	if
//line cmd/spx-backend/get_users_list.yap:25:1
	sortOrder := this.Gop_Env("sortOrder"); sortOrder != "" {
//line cmd/spx-backend/get_users_list.yap:26:1
		params.SortOrder = controller.SortOrder(sortOrder)
	}
//line cmd/spx-backend/get_users_list.yap:29:1
	params.Pagination.Index = ctx.ParamInt("pageIndex", firstPageIndex)
//line cmd/spx-backend/get_users_list.yap:30:1
	params.Pagination.Size = ctx.ParamInt("pageSize", defaultPageSize)
//line cmd/spx-backend/get_users_list.yap:31:1
	if
//line cmd/spx-backend/get_users_list.yap:31:1
	ok, msg := params.Validate(); !ok {
//line cmd/spx-backend/get_users_list.yap:32:1
		replyWithCodeMsg(ctx, errorInvalidArgs, msg)
//line cmd/spx-backend/get_users_list.yap:33:1
		return
	}
//line cmd/spx-backend/get_users_list.yap:36:1
	users, err := this.ctrl.ListUsers(ctx.Context(), params)
//line cmd/spx-backend/get_users_list.yap:37:1
	if err != nil {
//line cmd/spx-backend/get_users_list.yap:38:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/get_users_list.yap:39:1
		return
	}
//line cmd/spx-backend/get_users_list.yap:41:1
	this.Json__1(users)
}
func (this *get_users_list) Classfname() string {
	return "get_users_list"
}
//line cmd/spx-backend/get_util_upinfo.yap:6
func (this *get_util_upinfo) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/get_util_upinfo.yap:6:1
	ctx := &this.Context
//line cmd/spx-backend/get_util_upinfo.yap:7:1
	if
//line cmd/spx-backend/get_util_upinfo.yap:7:1
	_, isAuthed := ensureAuthedUser(ctx); !isAuthed {
//line cmd/spx-backend/get_util_upinfo.yap:8:1
		return
	}
//line cmd/spx-backend/get_util_upinfo.yap:11:1
	upInfo, err := this.ctrl.GetUpInfo(ctx.Context())
//line cmd/spx-backend/get_util_upinfo.yap:12:1
	if err != nil {
//line cmd/spx-backend/get_util_upinfo.yap:13:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/get_util_upinfo.yap:14:1
		return
	}
//line cmd/spx-backend/get_util_upinfo.yap:16:1
	this.Json__1(upInfo)
}
func (this *get_util_upinfo) Classfname() string {
	return "get_util_upinfo"
}
//line cmd/spx-backend/post_aigc_matting.yap:10
func (this *post_aigc_matting) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/post_aigc_matting.yap:10:1
	ctx := &this.Context
//line cmd/spx-backend/post_aigc_matting.yap:11:1
	if
//line cmd/spx-backend/post_aigc_matting.yap:11:1
	_, isAuthed := ensureAuthedUser(ctx); !isAuthed {
//line cmd/spx-backend/post_aigc_matting.yap:12:1
		return
	}
//line cmd/spx-backend/post_aigc_matting.yap:15:1
	params := &controller.MattingParams{}
//line cmd/spx-backend/post_aigc_matting.yap:16:1
	if !parseJSON(ctx, params) {
//line cmd/spx-backend/post_aigc_matting.yap:17:1
		return
	}
//line cmd/spx-backend/post_aigc_matting.yap:19:1
	if
//line cmd/spx-backend/post_aigc_matting.yap:19:1
	ok, msg := params.Validate(); !ok {
//line cmd/spx-backend/post_aigc_matting.yap:20:1
		replyWithCodeMsg(ctx, errorInvalidArgs, msg)
//line cmd/spx-backend/post_aigc_matting.yap:21:1
		return
	}
//line cmd/spx-backend/post_aigc_matting.yap:24:1
	result, err := this.ctrl.Matting(ctx.Context(), params)
//line cmd/spx-backend/post_aigc_matting.yap:25:1
	if err != nil {
//line cmd/spx-backend/post_aigc_matting.yap:26:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/post_aigc_matting.yap:27:1
		return
	}
//line cmd/spx-backend/post_aigc_matting.yap:29:1
	this.Json__1(result)
}
func (this *post_aigc_matting) Classfname() string {
	return "post_aigc_matting"
}
//line cmd/spx-backend/post_asset.yap:10
func (this *post_asset) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/post_asset.yap:10:1
	ctx := &this.Context
//line cmd/spx-backend/post_asset.yap:11:1
	if
//line cmd/spx-backend/post_asset.yap:11:1
	_, isAuthed := ensureAuthedUser(ctx); !isAuthed {
//line cmd/spx-backend/post_asset.yap:12:1
		return
	}
//line cmd/spx-backend/post_asset.yap:15:1
	params := &controller.CreateAssetParams{}
//line cmd/spx-backend/post_asset.yap:16:1
	if !parseJSON(ctx, params) {
//line cmd/spx-backend/post_asset.yap:17:1
		return
	}
//line cmd/spx-backend/post_asset.yap:19:1
	if
//line cmd/spx-backend/post_asset.yap:19:1
	ok, msg := params.Validate(); !ok {
//line cmd/spx-backend/post_asset.yap:20:1
		replyWithCodeMsg(ctx, errorInvalidArgs, msg)
//line cmd/spx-backend/post_asset.yap:21:1
		return
	}
//line cmd/spx-backend/post_asset.yap:24:1
	asset, err := this.ctrl.CreateAsset(ctx.Context(), params)
//line cmd/spx-backend/post_asset.yap:25:1
	if err != nil {
//line cmd/spx-backend/post_asset.yap:26:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/post_asset.yap:27:1
		return
	}
//line cmd/spx-backend/post_asset.yap:29:1
	this.Json__0(201, asset)
}
func (this *post_asset) Classfname() string {
	return "post_asset"
}
//line cmd/spx-backend/post_copilot_message.yap:10
func (this *post_copilot_message) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/post_copilot_message.yap:10:1
	ctx := &this.Context
//line cmd/spx-backend/post_copilot_message.yap:11:1
	if
//line cmd/spx-backend/post_copilot_message.yap:11:1
	_, isAuthed := ensureAuthedUser(ctx); !isAuthed {
//line cmd/spx-backend/post_copilot_message.yap:12:1
		return
	}
//line cmd/spx-backend/post_copilot_message.yap:15:1
	params := &controller.GenerateMessageParams{}
//line cmd/spx-backend/post_copilot_message.yap:16:1
	if !parseJSON(ctx, params) {
//line cmd/spx-backend/post_copilot_message.yap:17:1
		return
	}
//line cmd/spx-backend/post_copilot_message.yap:19:1
	if
//line cmd/spx-backend/post_copilot_message.yap:19:1
	ok, msg := params.Validate(); !ok {
//line cmd/spx-backend/post_copilot_message.yap:20:1
		replyWithCodeMsg(ctx, errorInvalidArgs, msg)
//line cmd/spx-backend/post_copilot_message.yap:21:1
		return
	}
//line cmd/spx-backend/post_copilot_message.yap:24:1
	result, err := this.ctrl.GenerateMessage(ctx.Context(), params)
//line cmd/spx-backend/post_copilot_message.yap:25:1
	if err != nil {
//line cmd/spx-backend/post_copilot_message.yap:26:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/post_copilot_message.yap:27:1
		return
	}
//line cmd/spx-backend/post_copilot_message.yap:29:1
	this.Json__1(result)
}
func (this *post_copilot_message) Classfname() string {
	return "post_copilot_message"
}
//line cmd/spx-backend/post_project-release.yap:10
func (this *post_project_release) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/post_project-release.yap:10:1
	ctx := &this.Context
//line cmd/spx-backend/post_project-release.yap:11:1
	if
//line cmd/spx-backend/post_project-release.yap:11:1
	_, isAuthed := ensureAuthedUser(ctx); !isAuthed {
//line cmd/spx-backend/post_project-release.yap:12:1
		return
	}
//line cmd/spx-backend/post_project-release.yap:15:1
	params := &controller.CreateProjectReleaseParams{}
//line cmd/spx-backend/post_project-release.yap:16:1
	if !parseJSON(ctx, params) {
//line cmd/spx-backend/post_project-release.yap:17:1
		return
	}
//line cmd/spx-backend/post_project-release.yap:19:1
	if
//line cmd/spx-backend/post_project-release.yap:19:1
	ok, msg := params.Validate(); !ok {
//line cmd/spx-backend/post_project-release.yap:20:1
		replyWithCodeMsg(ctx, errorInvalidArgs, msg)
//line cmd/spx-backend/post_project-release.yap:21:1
		return
	}
//line cmd/spx-backend/post_project-release.yap:24:1
	projectRelease, err := this.ctrl.CreateProjectRelease(ctx.Context(), params)
//line cmd/spx-backend/post_project-release.yap:25:1
	if err != nil {
//line cmd/spx-backend/post_project-release.yap:26:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/post_project-release.yap:27:1
		return
	}
//line cmd/spx-backend/post_project-release.yap:29:1
	this.Json__0(201, projectRelease)
}
func (this *post_project_release) Classfname() string {
	return "post_project-release"
}
//line cmd/spx-backend/post_project.yap:10
func (this *post_project) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/post_project.yap:10:1
	ctx := &this.Context
//line cmd/spx-backend/post_project.yap:11:1
	if
//line cmd/spx-backend/post_project.yap:11:1
	_, isAuthed := ensureAuthedUser(ctx); !isAuthed {
//line cmd/spx-backend/post_project.yap:12:1
		return
	}
//line cmd/spx-backend/post_project.yap:15:1
	params := &controller.CreateProjectParams{}
//line cmd/spx-backend/post_project.yap:16:1
	if !parseJSON(ctx, params) {
//line cmd/spx-backend/post_project.yap:17:1
		return
	}
//line cmd/spx-backend/post_project.yap:19:1
	if
//line cmd/spx-backend/post_project.yap:19:1
	ok, msg := params.Validate(); !ok {
//line cmd/spx-backend/post_project.yap:20:1
		replyWithCodeMsg(ctx, errorInvalidArgs, msg)
//line cmd/spx-backend/post_project.yap:21:1
		return
	}
//line cmd/spx-backend/post_project.yap:24:1
	project, err := this.ctrl.CreateProject(ctx.Context(), params)
//line cmd/spx-backend/post_project.yap:25:1
	if err != nil {
//line cmd/spx-backend/post_project.yap:26:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/post_project.yap:27:1
		return
	}
//line cmd/spx-backend/post_project.yap:29:1
	this.Json__0(201, project)
}
func (this *post_project) Classfname() string {
	return "post_project"
}
//line cmd/spx-backend/post_project_#owner_#name_liking.yap:6
func (this *post_project_owner_name_liking) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/post_project_#owner_#name_liking.yap:6:1
	ctx := &this.Context
//line cmd/spx-backend/post_project_#owner_#name_liking.yap:7:1
	if
//line cmd/spx-backend/post_project_#owner_#name_liking.yap:7:1
	_, isAuthed := ensureAuthedUser(ctx); !isAuthed {
//line cmd/spx-backend/post_project_#owner_#name_liking.yap:8:1
		return
	}
//line cmd/spx-backend/post_project_#owner_#name_liking.yap:11:1
	if
//line cmd/spx-backend/post_project_#owner_#name_liking.yap:11:1
	err := this.ctrl.LikeProject(ctx.Context(), this.Gop_Env("owner"), this.Gop_Env("name")); err != nil {
//line cmd/spx-backend/post_project_#owner_#name_liking.yap:12:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/post_project_#owner_#name_liking.yap:13:1
		return
	}
//line cmd/spx-backend/post_project_#owner_#name_liking.yap:15:1
	this.Text__0(204, "", "")
}
func (this *post_project_owner_name_liking) Classfname() string {
	return "post_project_#owner_#name_liking"
}
//line cmd/spx-backend/post_project_#owner_#name_view.yap:6
func (this *post_project_owner_name_view) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/post_project_#owner_#name_view.yap:6:1
	ctx := &this.Context
//line cmd/spx-backend/post_project_#owner_#name_view.yap:7:1
	if
//line cmd/spx-backend/post_project_#owner_#name_view.yap:7:1
	_, isAuthed := ensureAuthedUser(ctx); !isAuthed {
//line cmd/spx-backend/post_project_#owner_#name_view.yap:8:1
		return
	}
//line cmd/spx-backend/post_project_#owner_#name_view.yap:11:1
	if
//line cmd/spx-backend/post_project_#owner_#name_view.yap:11:1
	err := this.ctrl.RecordProjectView(ctx.Context(), this.Gop_Env("owner"), this.Gop_Env("name")); err != nil {
//line cmd/spx-backend/post_project_#owner_#name_view.yap:12:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/post_project_#owner_#name_view.yap:13:1
		return
	}
//line cmd/spx-backend/post_project_#owner_#name_view.yap:15:1
	this.Text__0(204, "", "")
}
func (this *post_project_owner_name_view) Classfname() string {
	return "post_project_#owner_#name_view"
}
//line cmd/spx-backend/post_storyline_#id_study.yap:6
func (this *post_storyline_id_study) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/post_storyline_#id_study.yap:6:1
	ctx := &this.Context
//line cmd/spx-backend/post_storyline_#id_study.yap:7:1
	if
//line cmd/spx-backend/post_storyline_#id_study.yap:7:1
	_, isAuthed := ensureAuthedUser(ctx); !isAuthed {
//line cmd/spx-backend/post_storyline_#id_study.yap:8:1
		return
	}
//line cmd/spx-backend/post_storyline_#id_study.yap:11:1
	userStorylineRelationship, err := this.ctrl.StudyStoryline(ctx.Context(), this.Gop_Env("id"))
//line cmd/spx-backend/post_storyline_#id_study.yap:12:1
	if err != nil {
//line cmd/spx-backend/post_storyline_#id_study.yap:13:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/post_storyline_#id_study.yap:14:1
		return
	}
//line cmd/spx-backend/post_storyline_#id_study.yap:16:1
	this.Json__1(userStorylineRelationship)
}
func (this *post_storyline_id_study) Classfname() string {
	return "post_storyline_#id_study"
}
//line cmd/spx-backend/post_user_#username_following.yap:6
func (this *post_user_username_following) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/post_user_#username_following.yap:6:1
	ctx := &this.Context
//line cmd/spx-backend/post_user_#username_following.yap:7:1
	if
//line cmd/spx-backend/post_user_#username_following.yap:7:1
	_, isAuthed := ensureAuthedUser(ctx); !isAuthed {
//line cmd/spx-backend/post_user_#username_following.yap:8:1
		return
	}
//line cmd/spx-backend/post_user_#username_following.yap:11:1
	if
//line cmd/spx-backend/post_user_#username_following.yap:11:1
	err := this.ctrl.FollowUser(ctx.Context(), this.Gop_Env("username")); err != nil {
//line cmd/spx-backend/post_user_#username_following.yap:12:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/post_user_#username_following.yap:13:1
		return
	}
//line cmd/spx-backend/post_user_#username_following.yap:15:1
	this.Text__0(204, "", "")
}
func (this *post_user_username_following) Classfname() string {
	return "post_user_#username_following"
}
//line cmd/spx-backend/post_util_fileurls.yap:10
func (this *post_util_fileurls) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/post_util_fileurls.yap:10:1
	ctx := &this.Context
//line cmd/spx-backend/post_util_fileurls.yap:12:1
	params := &controller.MakeFileURLsParams{}
//line cmd/spx-backend/post_util_fileurls.yap:13:1
	if !parseJSON(ctx, params) {
//line cmd/spx-backend/post_util_fileurls.yap:14:1
		return
	}
//line cmd/spx-backend/post_util_fileurls.yap:16:1
	if
//line cmd/spx-backend/post_util_fileurls.yap:16:1
	ok, msg := params.Validate(); !ok {
//line cmd/spx-backend/post_util_fileurls.yap:17:1
		replyWithCodeMsg(ctx, errorInvalidArgs, msg)
//line cmd/spx-backend/post_util_fileurls.yap:18:1
		return
	}
//line cmd/spx-backend/post_util_fileurls.yap:21:1
	fileURLs, err := this.ctrl.MakeFileURLs(ctx.Context(), params)
//line cmd/spx-backend/post_util_fileurls.yap:22:1
	if err != nil {
//line cmd/spx-backend/post_util_fileurls.yap:23:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/post_util_fileurls.yap:24:1
		return
	}
//line cmd/spx-backend/post_util_fileurls.yap:26:1
	this.Json__0(201, fileURLs)
}
func (this *post_util_fileurls) Classfname() string {
	return "post_util_fileurls"
}
//line cmd/spx-backend/post_util_fmtcode.yap:10
func (this *post_util_fmtcode) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/post_util_fmtcode.yap:10:1
	ctx := &this.Context
//line cmd/spx-backend/post_util_fmtcode.yap:12:1
	params := &controller.FmtCodeParams{}
//line cmd/spx-backend/post_util_fmtcode.yap:13:1
	if !parseJSON(ctx, params) {
//line cmd/spx-backend/post_util_fmtcode.yap:14:1
		return
	}
//line cmd/spx-backend/post_util_fmtcode.yap:16:1
	if
//line cmd/spx-backend/post_util_fmtcode.yap:16:1
	ok, msg := params.Validate(); !ok {
//line cmd/spx-backend/post_util_fmtcode.yap:17:1
		replyWithCodeMsg(ctx, errorInvalidArgs, msg)
//line cmd/spx-backend/post_util_fmtcode.yap:18:1
		return
	}
//line cmd/spx-backend/post_util_fmtcode.yap:21:1
	formattedCode, err := this.ctrl.FmtCode(ctx.Context(), params)
//line cmd/spx-backend/post_util_fmtcode.yap:22:1
	if err != nil {
//line cmd/spx-backend/post_util_fmtcode.yap:23:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/post_util_fmtcode.yap:24:1
		return
	}
//line cmd/spx-backend/post_util_fmtcode.yap:26:1
	this.Json__0(201, formattedCode)
}
func (this *post_util_fmtcode) Classfname() string {
	return "post_util_fmtcode"
}
//line cmd/spx-backend/post_util_guidance-check.yap:10
func (this *post_util_guidance_check) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/post_util_guidance-check.yap:10:1
	ctx := &this.Context
//line cmd/spx-backend/post_util_guidance-check.yap:11:1
	if
//line cmd/spx-backend/post_util_guidance-check.yap:11:1
	_, isAuthed := ensureAuthedUser(ctx); !isAuthed {
//line cmd/spx-backend/post_util_guidance-check.yap:12:1
		return
	}
//line cmd/spx-backend/post_util_guidance-check.yap:15:1
	params := &controller.CheckCodeParams{}
//line cmd/spx-backend/post_util_guidance-check.yap:16:1
	if !parseJSON(ctx, params) {
//line cmd/spx-backend/post_util_guidance-check.yap:17:1
		return
	}
//line cmd/spx-backend/post_util_guidance-check.yap:19:1
	if
//line cmd/spx-backend/post_util_guidance-check.yap:19:1
	ok, msg := params.Validate(); !ok {
//line cmd/spx-backend/post_util_guidance-check.yap:20:1
		replyWithCodeMsg(ctx, errorInvalidArgs, msg)
//line cmd/spx-backend/post_util_guidance-check.yap:21:1
		return
	}
//line cmd/spx-backend/post_util_guidance-check.yap:24:1
	result, err := this.ctrl.CheckCode(ctx.Context(), params)
//line cmd/spx-backend/post_util_guidance-check.yap:25:1
	if err != nil {
//line cmd/spx-backend/post_util_guidance-check.yap:26:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/post_util_guidance-check.yap:27:1
		return
	}
//line cmd/spx-backend/post_util_guidance-check.yap:29:1
	this.Json__1(result)
}
func (this *post_util_guidance_check) Classfname() string {
	return "post_util_guidance-check"
}
//line cmd/spx-backend/put_asset_#id.yap:10
func (this *put_asset_id) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/put_asset_#id.yap:10:1
	ctx := &this.Context
//line cmd/spx-backend/put_asset_#id.yap:11:1
	if
//line cmd/spx-backend/put_asset_#id.yap:11:1
	_, isAuthed := ensureAuthedUser(ctx); !isAuthed {
//line cmd/spx-backend/put_asset_#id.yap:12:1
		return
	}
//line cmd/spx-backend/put_asset_#id.yap:15:1
	params := &controller.UpdateAssetParams{}
//line cmd/spx-backend/put_asset_#id.yap:16:1
	if !parseJSON(ctx, params) {
//line cmd/spx-backend/put_asset_#id.yap:17:1
		return
	}
//line cmd/spx-backend/put_asset_#id.yap:19:1
	if
//line cmd/spx-backend/put_asset_#id.yap:19:1
	ok, msg := params.Validate(); !ok {
//line cmd/spx-backend/put_asset_#id.yap:20:1
		replyWithCodeMsg(ctx, errorInvalidArgs, msg)
//line cmd/spx-backend/put_asset_#id.yap:21:1
		return
	}
//line cmd/spx-backend/put_asset_#id.yap:24:1
	asset, err := this.ctrl.UpdateAsset(ctx.Context(), this.Gop_Env("id"), params)
//line cmd/spx-backend/put_asset_#id.yap:25:1
	if err != nil {
//line cmd/spx-backend/put_asset_#id.yap:26:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/put_asset_#id.yap:27:1
		return
	}
//line cmd/spx-backend/put_asset_#id.yap:29:1
	this.Json__1(asset)
}
func (this *put_asset_id) Classfname() string {
	return "put_asset_#id"
}
//line cmd/spx-backend/put_project_#owner_#name.yap:10
func (this *put_project_owner_name) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/put_project_#owner_#name.yap:10:1
	ctx := &this.Context
//line cmd/spx-backend/put_project_#owner_#name.yap:11:1
	if
//line cmd/spx-backend/put_project_#owner_#name.yap:11:1
	_, isAuthed := ensureAuthedUser(ctx); !isAuthed {
//line cmd/spx-backend/put_project_#owner_#name.yap:12:1
		return
	}
//line cmd/spx-backend/put_project_#owner_#name.yap:15:1
	params := &controller.UpdateProjectParams{}
//line cmd/spx-backend/put_project_#owner_#name.yap:16:1
	if !parseJSON(ctx, params) {
//line cmd/spx-backend/put_project_#owner_#name.yap:17:1
		return
	}
//line cmd/spx-backend/put_project_#owner_#name.yap:19:1
	if
//line cmd/spx-backend/put_project_#owner_#name.yap:19:1
	ok, msg := params.Validate(); !ok {
//line cmd/spx-backend/put_project_#owner_#name.yap:20:1
		replyWithCodeMsg(ctx, errorInvalidArgs, msg)
//line cmd/spx-backend/put_project_#owner_#name.yap:21:1
		return
	}
//line cmd/spx-backend/put_project_#owner_#name.yap:24:1
	project, err := this.ctrl.UpdateProject(ctx.Context(), this.Gop_Env("owner"), this.Gop_Env("name"), params)
//line cmd/spx-backend/put_project_#owner_#name.yap:25:1
	if err != nil {
//line cmd/spx-backend/put_project_#owner_#name.yap:26:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/put_project_#owner_#name.yap:27:1
		return
	}
//line cmd/spx-backend/put_project_#owner_#name.yap:29:1
	this.Json__1(project)
}
func (this *put_project_owner_name) Classfname() string {
	return "put_project_#owner_#name"
}
//line cmd/spx-backend/put_storyline_#id_study.yap:10
func (this *put_storyline_id_study) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/put_storyline_#id_study.yap:10:1
	ctx := &this.Context
//line cmd/spx-backend/put_storyline_#id_study.yap:11:1
	if
//line cmd/spx-backend/put_storyline_#id_study.yap:11:1
	_, isAuthed := ensureAuthedUser(ctx); !isAuthed {
//line cmd/spx-backend/put_storyline_#id_study.yap:12:1
		return
	}
//line cmd/spx-backend/put_storyline_#id_study.yap:15:1
	param := &controller.UpdateUserStorylineRelationshipParam{}
//line cmd/spx-backend/put_storyline_#id_study.yap:16:1
	if !parseJSON(ctx, param) {
//line cmd/spx-backend/put_storyline_#id_study.yap:17:1
		return
	}
//line cmd/spx-backend/put_storyline_#id_study.yap:20:1
	if
//line cmd/spx-backend/put_storyline_#id_study.yap:20:1
	ok, msg := param.Validate(); !ok {
//line cmd/spx-backend/put_storyline_#id_study.yap:21:1
		replyWithCodeMsg(ctx, errorInvalidArgs, msg)
//line cmd/spx-backend/put_storyline_#id_study.yap:22:1
		return
	}
//line cmd/spx-backend/put_storyline_#id_study.yap:25:1
	userStorylineRelationship, err := this.ctrl.FinishStorylineLevel(ctx.Context(), this.Gop_Env("id"), param)
//line cmd/spx-backend/put_storyline_#id_study.yap:26:1
	if err != nil {
//line cmd/spx-backend/put_storyline_#id_study.yap:27:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/put_storyline_#id_study.yap:28:1
		return
	}
//line cmd/spx-backend/put_storyline_#id_study.yap:30:1
	this.Json__1(userStorylineRelationship)
}
func (this *put_storyline_id_study) Classfname() string {
	return "put_storyline_#id_study"
}
//line cmd/spx-backend/put_user.yap:10
func (this *put_user) Main(_gop_arg0 *yap.Context) {
	this.Handler.Main(_gop_arg0)
//line cmd/spx-backend/put_user.yap:10:1
	ctx := &this.Context
//line cmd/spx-backend/put_user.yap:11:1
	if
//line cmd/spx-backend/put_user.yap:11:1
	_, isAuthed := ensureAuthedUser(ctx); !isAuthed {
//line cmd/spx-backend/put_user.yap:12:1
		return
	}
//line cmd/spx-backend/put_user.yap:15:1
	params := &controller.UpdateAuthedUserParams{}
//line cmd/spx-backend/put_user.yap:16:1
	if !parseJSON(ctx, params) {
//line cmd/spx-backend/put_user.yap:17:1
		return
	}
//line cmd/spx-backend/put_user.yap:19:1
	if
//line cmd/spx-backend/put_user.yap:19:1
	ok, msg := params.Validate(); !ok {
//line cmd/spx-backend/put_user.yap:20:1
		replyWithCodeMsg(ctx, errorInvalidArgs, msg)
//line cmd/spx-backend/put_user.yap:21:1
		return
	}
//line cmd/spx-backend/put_user.yap:24:1
	user, err := this.ctrl.UpdateAuthedUser(ctx.Context(), params)
//line cmd/spx-backend/put_user.yap:25:1
	if err != nil {
//line cmd/spx-backend/put_user.yap:26:1
		replyWithInnerError(ctx, err)
//line cmd/spx-backend/put_user.yap:27:1
		return
	}
//line cmd/spx-backend/put_user.yap:29:1
	this.Json__1(user)
}
func (this *put_user) Classfname() string {
	return "put_user"
}
func main() {
	new(AppV2).Main()
}
